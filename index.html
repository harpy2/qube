<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QUBE â€” í’€ì–´ë¼. íƒˆì¶œí•˜ë¼.</title>
<meta name="description" content="ë°©íƒˆì¶œ ì¶”ë¦¬ í¼ì¦ ê²Œì„. ë‹¨ì„œë¥¼ ì°¾ê³ , í¼ì¦ì„ í’€ê³ , íƒˆì¶œí•˜ë¼.">
<meta property="og:title" content="QUBE â€” ë°©íƒˆì¶œ ì¶”ë¦¬ í¼ì¦ ê²Œì„">
<meta property="og:description" content="í’€ì–´ë¼. íƒˆì¶œí•˜ë¼.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://qube.salmonholic.com">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”’</text></svg>">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a0a0a;--bg2:#111;--bg3:#1a1a1a;
  --text:#e0e0e0;--text2:#888;--text3:#555;
  --accent:#b44aff;--accent2:#9333ea;--accent-glow:rgba(180,74,255,.15);
  --cyan:#00e5ff;--danger:#ff4444;--success:#00ff88;
  --card:rgba(255,255,255,.03);--card-border:rgba(255,255,255,.06);
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Noto Sans KR',sans-serif;line-height:1.6;overflow-x:hidden}
.hidden{display:none!important}

/* Hero */
.hero{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;position:relative;overflow:hidden;padding:2rem}
.hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 50% 40%,rgba(180,74,255,.06) 0%,transparent 70%);pointer-events:none}
.hero h1{font-size:clamp(3rem,10vw,6rem);font-weight:900;letter-spacing:0.1em;margin-bottom:1rem;background:linear-gradient(135deg,#fff 0%,#b44aff 50%,#00e5ff 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{font-size:clamp(1rem,3vw,1.3rem);color:var(--text2);max-width:450px;margin-bottom:2.5rem}
.hero-cta{padding:16px 48px;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#000;font-size:1.1rem;font-weight:700;border:none;border-radius:50px;cursor:pointer;transition:all .3s;letter-spacing:.05em}
.hero-cta:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(180,74,255,.4)}
.scroll-hint{position:absolute;bottom:2rem;animation:bounce 2s infinite;color:var(--text3);font-size:1.5rem}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(10px)}}

/* Particles */
.particles{position:absolute;inset:0;pointer-events:none;overflow:hidden}
.particle{position:absolute;width:3px;height:3px;border-radius:50%;opacity:.4;animation:float linear infinite}
@keyframes float{0%{transform:translateY(100vh) scale(0);opacity:0}10%{opacity:.4}90%{opacity:.4}100%{transform:translateY(-10vh) scale(1);opacity:0}}

/* Stats Bar */
.stats-bar{display:flex;justify-content:center;gap:40px;padding:24px 0;margin-bottom:1rem}
.stat{text-align:center}
.stat-val{font-size:2rem;font-weight:900;background:linear-gradient(135deg,var(--accent),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.stat-label{font-size:.8rem;color:var(--text2);margin-top:4px}

/* Rooms Section */
.rooms-section{max-width:900px;margin:0 auto;padding:0 1.5rem 4rem}
.rooms-section h2{font-size:1.5rem;margin-bottom:.5rem;display:flex;align-items:center;gap:8px}
.rooms-progress{color:var(--text2);font-size:.85rem;margin-bottom:1.5rem}
.room-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:1.2rem}

/* Room Card */
.room-card{background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:1.5rem;backdrop-filter:blur(10px);transition:all .3s;cursor:pointer;position:relative;overflow:hidden}
.room-card:hover{border-color:rgba(180,74,255,.3);background:rgba(255,255,255,.05);transform:translateY(-3px);box-shadow:0 8px 30px rgba(180,74,255,.1)}
.room-card.cleared{border-color:rgba(0,255,136,.2)}
.room-card.cleared .room-start{background:var(--bg3);color:var(--text2)}
.room-badge{position:absolute;top:12px;right:12px;padding:4px 12px;border-radius:20px;font-size:.7rem;font-weight:700}
.badge-new{background:var(--accent);color:#fff}
.badge-cleared{background:var(--success);color:#000}
.room-emoji{font-size:2.5rem;margin-bottom:.8rem}
.room-title{font-size:1.15rem;font-weight:700;margin-bottom:.4rem}
.room-desc{font-size:.85rem;color:var(--text2);margin-bottom:.8rem;line-height:1.5}
.room-meta{display:flex;gap:12px;color:var(--text2);font-size:.85rem;margin-bottom:1rem}
.room-diff .star{color:var(--accent)}
.room-diff .star.empty{color:var(--text3)}
.room-start{width:100%;padding:10px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border:none;border-radius:50px;cursor:pointer;font-size:.9rem;font-weight:600;transition:all .3s}
.room-start:hover{box-shadow:0 4px 15px rgba(180,74,255,.4)}

/* Game Screen */
#game{max-width:700px;margin:0 auto;min-height:100vh;padding:1rem}
.game-header{display:flex;align-items:center;padding:1rem 0;border-bottom:1px solid var(--card-border);margin-bottom:1.5rem;gap:12px}
.game-back{background:none;border:none;color:var(--text2);font-size:1.3rem;cursor:pointer;padding:4px 8px}
.game-back:hover{color:var(--text)}
.game-title{font-size:1.1rem;font-weight:700;flex:1}
.game-progress-text{color:var(--text2);font-size:.85rem}

.progress-bar{display:flex;gap:6px;margin-bottom:1.5rem}
.prog-dot{flex:1;height:4px;border-radius:2px;background:var(--bg3);transition:all .3s}
.prog-dot.active{background:var(--accent);box-shadow:0 0 8px rgba(180,74,255,.4)}
.prog-dot.done{background:var(--success)}

.story-box{background:var(--bg3);border:1px solid var(--card-border);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;animation:fadeIn .5s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
.story-box .label{color:var(--accent);font-size:.75rem;font-weight:700;margin-bottom:8px;text-transform:uppercase;letter-spacing:.15em}
.story-box p{color:var(--text2);line-height:1.8}

.puzzle-box{background:rgba(180,74,255,.05);border:1px solid rgba(180,74,255,.15);border-radius:16px;padding:1.5rem;margin-bottom:1.5rem;animation:fadeIn .5s ease}
.puzzle-label{color:var(--cyan);font-size:.8rem;font-weight:700;margin-bottom:12px;letter-spacing:.05em}
.puzzle-question{font-size:1rem;line-height:1.8;margin-bottom:1.2rem}

.cpq-mission{background:rgba(0,229,255,.05);border:1px solid rgba(0,229,255,.15);border-radius:12px;padding:1.2rem;margin:1rem 0}
.cpq-mission .mission-title{color:var(--cyan);font-size:.8rem;font-weight:700;margin-bottom:10px}
.cpq-steps{font-size:.9rem;color:var(--text2);line-height:2;padding-left:1.2rem}
.cpq-steps b{color:var(--text)}
.cpq-keyword-box{margin-top:12px;display:flex;align-items:center;gap:10px}
.cpq-keyword{display:inline-block;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#000;padding:8px 20px;border-radius:50px;font-size:.9rem;font-weight:700;cursor:pointer;transition:all .2s}
.cpq-keyword:hover{transform:scale(1.03);box-shadow:0 4px 15px rgba(180,74,255,.3)}

.hint-btn{background:none;border:1px solid var(--text3);color:var(--text2);padding:8px 16px;border-radius:50px;font-size:.8rem;cursor:pointer;transition:all .2s;margin-bottom:1rem}
.hint-btn:hover{border-color:var(--accent);color:var(--accent)}
.hint-box{background:rgba(255,165,0,.08);border:1px solid rgba(255,165,0,.2);border-radius:10px;padding:12px 16px;font-size:.9rem;color:#f59e0b;margin-bottom:1rem}

.answer-area{display:flex;flex-direction:column;gap:10px}
.answer-area input{width:100%;padding:14px 18px;background:var(--bg3);border:1px solid var(--card-border);border-radius:12px;color:var(--text);font-size:1rem;font-family:inherit;outline:none;transition:border-color .3s}
.answer-area input:focus{border-color:var(--accent)}
.answer-area input::placeholder{color:var(--text3)}
.btn-submit{width:100%;padding:14px 28px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border:none;border-radius:12px;font-weight:700;cursor:pointer;transition:all .2s;white-space:nowrap;font-family:inherit;font-size:.95rem}
.btn-submit:hover{box-shadow:0 4px 15px rgba(180,74,255,.4)}
.btn-next{width:100%;padding:14px;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#000;border:none;border-radius:50px;font-weight:700;cursor:pointer;transition:all .3s;font-size:1rem;font-family:inherit;margin-top:1rem}
.btn-next:hover{box-shadow:0 4px 20px rgba(180,74,255,.4);transform:translateY(-1px)}

.feedback{padding:14px 18px;border-radius:12px;margin-top:1rem;font-size:.95rem;animation:fadeIn .3s}
.feedback.correct{background:rgba(0,255,136,.1);color:var(--success);border:1px solid rgba(0,255,136,.2)}
.feedback.wrong{background:rgba(255,68,68,.1);color:var(--danger);border:1px solid rgba(255,68,68,.2)}

/* Result */
#result{max-width:600px;margin:0 auto;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:2rem}
.result-card{text-align:center;width:100%}
.result-emoji{font-size:4rem;margin-bottom:1rem}
.result-title{font-size:2rem;font-weight:900;margin-bottom:.5rem;background:linear-gradient(135deg,#fff,var(--accent),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.result-sub{color:var(--text2);margin-bottom:2rem}
.result-grade{display:inline-block;font-size:1.5rem;font-weight:900;padding:10px 30px;border-radius:50px;background:linear-gradient(135deg,var(--accent),var(--cyan));color:#000;margin-bottom:2rem}
.result-stats{display:flex;justify-content:center;gap:20px;margin-bottom:2rem;flex-wrap:wrap}
.result-stat{background:var(--card);border:1px solid var(--card-border);border-radius:16px;padding:18px 24px;min-width:100px}
.result-stat-val{font-size:1.5rem;font-weight:900;color:var(--accent)}
.result-stat-label{font-size:.75rem;color:var(--text2);margin-top:4px}
.result-btns{display:flex;flex-direction:column;gap:10px;max-width:300px;margin:0 auto}
.btn-home{padding:14px;background:linear-gradient(135deg,var(--accent),var(--accent2));color:#fff;border:none;border-radius:50px;font-weight:700;cursor:pointer;font-size:1rem;font-family:inherit;transition:all .3s}
.btn-home:hover{box-shadow:0 4px 15px rgba(180,74,255,.4)}
.btn-share{padding:14px;background:transparent;border:1px solid var(--card-border);color:var(--text2);border-radius:50px;cursor:pointer;font-size:.9rem;font-family:inherit;transition:all .2s}
.btn-share:hover{border-color:var(--accent);color:var(--text)}

/* Loading */
.loading-screen{display:none;position:fixed;inset:0;background:var(--bg);z-index:1000;flex-direction:column;align-items:center;justify-content:center;gap:16px}
.loading-screen.active{display:flex}
.spinner{width:40px;height:40px;border:3px solid var(--bg3);border-top-color:var(--accent);border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.loading-text{color:var(--text2);font-size:.9rem}

@media(max-width:600px){
  .hero h1{letter-spacing:.05em}
  .room-grid{grid-template-columns:1fr}
  .stats-bar{gap:24px}
  .result-stats{gap:12px}
}
</style>
</head>
<body>

<!-- â”€â”€â”€ í™ˆ â”€â”€â”€ -->
<div id="home">
  <div class="hero">
    <div class="particles" id="particles"></div>
    <h1>QUBE</h1>
    <p>í’€ì–´ë¼. íƒˆì¶œí•˜ë¼.</p>
    <button class="hero-cta" onclick="scrollToRooms()">ë°© ì„ íƒí•˜ê¸°</button>
    <div class="scroll-hint">â†“</div>
  </div>
  <div class="stats-bar">
    <div class="stat"><div class="stat-val" id="statCleared">0</div><div class="stat-label">í´ë¦¬ì–´</div></div>
    <div class="stat"><div class="stat-val" id="statGrade">ğŸ”°</div><div class="stat-label">ë“±ê¸‰</div></div>
    <div class="stat"><div class="stat-val" id="statStreak">0</div><div class="stat-label">ì—°ì†</div></div>
  </div>
  <div class="rooms-section" id="rooms-section">
    <h2>ğŸšª ë¯¸ìŠ¤í„°ë¦¬ ëª©ë¡</h2>
    <div class="rooms-progress" id="rooms-progress"></div>
    <div class="room-grid" id="roomGrid"></div>
  </div>
</div>

<!-- â”€â”€â”€ ë¡œë”© â”€â”€â”€ -->
<div class="loading-screen" id="loadingScreen">
  <div class="spinner"></div>
  <div class="loading-text">ë°©ì— ì§„ì…í•˜ëŠ” ì¤‘...</div>
</div>

<!-- â”€â”€â”€ ê²Œì„ â”€â”€â”€ -->
<div id="game" class="hidden">
  <div class="game-header">
    <button class="game-back" onclick="confirmExit()">â†</button>
    <div class="game-title" id="gameTitle"></div>
    <div class="game-progress-text" id="gameProgressText"></div>
  </div>
  <div class="progress-bar" id="progressBar"></div>
  <div id="gameContent"></div>
</div>

<!-- â”€â”€â”€ ê²°ê³¼ â”€â”€â”€ -->
<div id="result" class="hidden">
  <div class="result-card" id="resultContent"></div>
</div>

<script>
const API = 'https://qube-api.harpy922.workers.dev';

// â”€â”€â”€ ë°© í…œí”Œë¦¿ â”€â”€â”€
const ROOMS = [
  {
    id: 'professor', emoji: 'ğŸšï¸', name: 'ì‚¬ë¼ì§„ êµìˆ˜ì˜ ì„œì¬',
    desc: 'ê¹€ë™í˜„ êµìˆ˜ê°€ ì‚¬ë¼ì¡Œë‹¤. ì„œì¬ì— ë‚¨ì€ ê±´ í”¼ ë¬»ì€ ë©”ëª¨ í•œ ì¥. 72ì‹œê°„ ì•ˆì— ì§„ì‹¤ì„ ì°¾ì•„ë¼.',
    difficulty: 1, time: '12ë¶„',
    intro: `ê¹€ë™í˜„ êµìˆ˜ê°€ ì‚¬ë¼ì¡Œë‹¤. 3ì¼ì§¸ ì—°ë½ ë‘ì ˆ. ë‹¹ì‹ ì€ ë§ˆìŠ¤í„°í‚¤ë¡œ ì„œì¬ì— ë“¤ì–´ì„°ì§€ë§Œ, ë¬¸ì´ ì ê²¼ë‹¤. í¬ë¯¸í•œ ìŠ¤íƒ ë“œ ë¶ˆë¹› ì•„ë˜, ê¸‰í•˜ê²Œ ì°¢ê¸´ ì„œë¥˜ì™€ ì“°ëŸ¬ì§„ ì»¤í”¼ì”. êµìˆ˜ëŠ” ë­”ê°€ë¥¼ ìˆ¨ê¸°ë‹¤ ì‚¬ë¼ì§„ ê²ƒì´ë‹¤. ì„œì¬ì— ê°‡íŒ ì§€ê¸ˆ, ì§„ì‹¤ì„ íŒŒí—¤ì³ë¼.`,
    puzzles: [
      { type:'general', title:'ğŸ“‹ í¼ì¦ 1: ì±…ìƒ ìœ„ì˜ ì•”í˜¸ ë©”ëª¨',
        story: `ì±…ìƒ ìœ„, í”¼ ë¬»ì€ í¬ìŠ¤íŠ¸ì‡ í•˜ë‚˜. êµìˆ˜ì˜ ë–¨ë¦¬ëŠ” í•„ì²´. ì¢Œí‘œ ì•”í˜¸ë‹¤.

<b>â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”
â”‚ ì„œ â”‚ ë â”‚ ì„ â”‚ ê¸ˆ â”‚
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤
â”‚ ì—´ â”‚ ì–´ â”‚ ê³  â”‚ ë¼ â”‚
â”œâ”€â”€â”¼â”€â”€â”¼â”€â”€â”¼â”€â”€â”¤
â”‚ ë²½ â”‚ í™• â”‚ ì¸ â”‚ í•´ â”‚
â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜</b>

ê·¸ ì•„ë˜ ì¢Œí‘œê°€ ì í˜€ìˆë‹¤: <b>(1,1) (1,2) (2,1) (2,2) (2,3)</b>
(í–‰,ì—´ ìˆœì„œ)`,
        question: `ê²©ìì—ì„œ ì¢Œí‘œë¥¼ ì½ì–´ ë©”ì‹œì§€ë¥¼ ì™„ì„±í•˜ë¼.

(1,1)=ì„œ, (1,2)=ë, (2,1)=ì—´, (2,2)=ì–´, (2,3)=?

ë‹¤ì„¯ ê¸€ìë¥¼ ì´ì–´ì„œ ì…ë ¥í•˜ì‹œì˜¤. (ê³µë°± ì—†ì´)`,
        hint: '(1,1)=ì„œ, (1,2)=ë, (2,1)=ì—´, (2,2)=ì–´, (2,3)=ê³  â†’ "ì„œëì—´ì–´ê³ "? ì•„ë‹ˆ, ë‹¤ì‹œ ì½ì–´ë³´ì.',
        validate: i => i.replace(/\s/g,'') === 'ì„œëì—´ì–´ê³ ' || i.replace(/\s/g,'') === 'ì„œëì„ì—´ì–´' },
      { type:'general', title:'ğŸ“¦ í¼ì¦ 2: íƒë°° ì˜ìˆ˜ì¦ ë¶„ì„',
        story: `ì„œëì´ ì—´ë ¸ë‹¤. íƒë°° ì˜ìˆ˜ì¦ í•œ ì¥. ì‹¤ì¢… ì´í‹€ ì „, ë‚¯ì„  ì£¼ì†Œë¡œ ë³´ë‚¸ í™”ë¬¼. ë°°ì†¡ë£Œì— ë­”ê°€ ìˆ¨ê²¨ì ¸ ìˆë‹¤.

<b>ğŸ“¦ íƒë°° ì˜ìˆ˜ì¦
ê¸°ë³¸ë£Œ: 3,000ì›
ê±°ë¦¬í• ì¦(5kmì´ˆê³¼): 2,000ì›  
ë¬´ê²Œí• ì¦(5kgì´ˆê³¼): 1,500ì›
í• ì¸(íšŒì›): -500ì›
ìµœì¢… ë°°ì†¡ë£Œ: ?ì›</b>

êµìˆ˜ê°€ ë¹¨ê°„ íœìœ¼ë¡œ í‘œì‹œí•œ ë¶€ë¶„: "ë°°ì†¡ë£Œê°€ ë‹¨ì„œë‹¤."`,
        question: `íƒë°° ì˜ìˆ˜ì¦ì˜ ìµœì¢… ë°°ì†¡ë£Œë¥¼ ê³„ì‚°í•˜ë¼.

<b>ìš”ê¸ˆ ê³„ì‚°:</b>
- ê¸°ë³¸ë£Œ: 3,000ì›
- ê±°ë¦¬í• ì¦: 2,000ì›
- ë¬´ê²Œí• ì¦: 1,500ì›  
- íšŒì›í• ì¸: -500ì›

ìµœì¢… ë°°ì†¡ë£ŒëŠ” ì–¼ë§ˆì¸ê°€?`,
        hint: '3,000 + 2,000 + 1,500 - 500 = ?',
        validate: i => i.replace(/[^\d]/g,'') === '6000' || i.trim() === '6000' },
      { type:'general', title:'ğŸ”¢ í¼ì¦ 3: ë²½ ì†ì˜ ê¸ˆê³ ',
        story: `ì˜ìˆ˜ì¦ ë’·ë©´: "ë²½ì„ í™•ì¸í•˜ë¼." ì±…ì¥ ì„¸ ë²ˆì§¸ ì¹¸, ì±…ë“¤ ë’¤ì— ìˆ¨ê²¨ì§„ ê¸ˆê³ . ìœ„ì— ë„¤ ê¶Œì˜ ì±…ì´ ì˜ë„ì ìœ¼ë¡œ ë°°ì¹˜ë˜ì–´ ìˆë‹¤.

<b>ğŸ“• "ë¡œë§ˆì˜ ì¼ê³± ì–¸ë•" â€” 263í˜ì´ì§€
ğŸ“— "ì´ì§‘íŠ¸ ì œ5ì™•ì¡°" â€” 178í˜ì´ì§€
ğŸ“˜ "ê·¸ë¦¬ìŠ¤ 12ì‹ " â€” 412í˜ì´ì§€
ğŸ“™ "í•œêµ­ì˜ ì‚¼êµ­ì‹œëŒ€" â€” 95í˜ì´ì§€</b>

ê¸ˆê³  ì˜†ì— ë©”ëª¨:
"ê° ì±… ì œëª©ì— ìˆ¨ê²¨ì§„ ìˆ«ìê°€ ë¹„ë°€ë²ˆí˜¸ë‹¤. í˜ì´ì§€ ìˆ˜ì— ì†ì§€ ë§ˆë¼."`,
        question: `êµìˆ˜ì˜ ë©”ëª¨ë¥¼ í•´ì„í•˜ë¼.

ê° ì±… <b>ì œëª©</b> ì†ì— ìˆ¨ê²¨ì§„ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•˜ë©´?

ğŸ“• ë¡œë§ˆì˜ <b>ì¼ê³±</b> ì–¸ë•
ğŸ“— ì´ì§‘íŠ¸ ì œ<b>5</b>ì™•ì¡°
ğŸ“˜ ê·¸ë¦¬ìŠ¤ <b>12</b>ì‹ 
ğŸ“™ í•œêµ­ì˜ <b>ì‚¼êµ­</b>ì‹œëŒ€

(íŒíŠ¸: ìˆ«ìë¥¼ ì•„ë¼ë¹„ì•„ ìˆ«ìë¡œ ë³€í™˜)`,
        hint: 'ì¼ê³±=7, 5=5, 12=12, ì‚¼êµ­=3 â†’ 4ìë¦¬ ìˆ«ìë¡œ...',
        validate: i => i.replace(/\s/g,'') === '75123' || i.replace(/\s/g,'') === '7-5-12-3' || i.replace(/\s/g,'').includes('75123') },
      { type:'general', title:'ğŸ““ í¼ì¦ 4: ë¹„ë°€ ìˆ˜ì²©ì˜ ì•”í˜¸',
        story: `ê¸ˆê³  ì•ˆ, "PRIVATE" ê°ì¸ëœ ê°€ì£½ ìˆ˜ì²©. êµìˆ˜ëŠ” ë­”ê°€ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì¶”ì í•˜ê³  ìˆì—ˆë‹¤. ë§ˆì§€ë§‰ í˜ì´ì§€ì— ì•ŒíŒŒë²³ ì•”í˜¸.

<b>ğŸ”¤ ì•”í˜¸ í•´ë…
A=1, B=2, C=3... Z=26

DOOR = D(4) + O(15) + O(15) + R(18) = ?</b>

ìˆ˜ì²© í•˜ë‹¨ì— ë©”ëª¨: "ì´ ìˆ«ìê°€ ë§ˆì§€ë§‰ ë‹¨ì„œì˜ ì—´ì‡ ë‹¤."`,
        question: `ìˆ˜ì²©ì˜ ì•ŒíŒŒë²³ ì•”í˜¸ë¥¼ í•´ë…í•˜ë¼.

<b>ê³„ì‚° ê³µì‹:</b>
A=1, B=2, C=3, D=4, ..., O=15, ..., R=18, ..., Z=26

<b>DOORë¥¼ ìˆ«ìë¡œ ë³€í™˜:</b>
D = 4
O = 15  
O = 15
R = 18

4 + 15 + 15 + 18 = ?`,
        hint: '4 + 15 + 15 + 18 = ?',
        validate: i => i.trim() === '52' },
      { type:'cpq', cpqIndex:0,
        story: `ìˆ˜ì²© ë§ˆì§€ë§‰ ì¥. ë¹¨ê°„ ë™ê·¸ë¼ë¯¸ ì¹œ ì£¼ì†Œ. "ì—¬ê¸°ê°€ í•µì‹¬ì´ë‹¤." êµìˆ˜ê°€ ì‚¬ë¼ì§€ê¸° ì§ì „, ë§ˆì§€ë§‰ìœ¼ë¡œ í–¥í•˜ë ¤ë˜ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `êµìˆ˜ëŠ” ì«“ê¸°ê³  ìˆì—ˆë‹¤. ê·¸ë¦¬ê³  ë‹¹ì‹ ì´ ì´ ìë¦¬ì— ì˜¤ê¸¸ ì›í–ˆë‹¤. ë§ˆì§€ë§‰ íƒˆì¶œ ì½”ë“œëŠ” ë¬¸ ì˜† íŒ¨ë„ì—.` }
    ]
  },
  {
    id: 'ship', emoji: 'ğŸš¢', name: 'í‘œë¥˜ëœ í™”ë¬¼ì„ ',
    desc: 'ë¬´ì¸ í™”ë¬¼ì„ ì´ ë– ë°€ë ¤ì™”ë‹¤. ì„ ì› 12ëª…, í”ì ë„ ì—†ì´ ì¦ë°œ. êµ¬ëª…ë³´íŠ¸ëŠ” ê·¸ëŒ€ë¡œë‹¤.',
    difficulty: 2, time: '15ë¶„',
    intro: `ë™í•´í˜¸. ì„ ì› 12ëª…ì´ íƒ€ê³  ìˆì—ˆë‹¤. ì§€ê¸ˆì€ ì•„ë¬´ë„ ì—†ë‹¤. êµ¬ëª…ë³´íŠ¸ë„, ì†Œì§€í’ˆë„ ê·¸ëŒ€ë¡œì¸ ì±„. í•´ì–‘ê²½ì°°ì¸ ë‹¹ì‹ ì´ ì˜¬ë¼íƒ”ì§€ë§Œ, í•´ì¹˜ê°€ ë‹«í˜”ë‹¤. ë¹„ìƒë“±ë§Œ ê¹œë¹¡ì´ê³ , ë¬´ì „ê¸°ì—ì„œ ì˜ë¯¸ ë¶ˆëª…ì˜ ì‹ í˜¸ìŒì´ ë°˜ë³µëœë‹¤. ì´ ë°°ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë‚˜.`,
    puzzles: [
      { type:'general', title:'ğŸ§­ í¼ì¦ 1: í•­í•´ ì¼ì§€ì˜ ë§ˆì§€ë§‰ ê¸°ë¡',
        story: `ì„ ì¥ì‹¤. í•­í•´ ì¼ì§€ ë§ˆì§€ë§‰ ê¸°ë¡: "2ì›” 11ì¼ 23:47 â€” ë ˆì´ë” ì´ìƒ ë°˜ì‘. ì†Œë¦¬ë¥¼ ë“¤ì—ˆë‹¤. í™•ì¸í•˜ëŸ¬ ê°„ë‹¤." ì—¬ê¸°ì„œ ëŠê¸´ë‹¤. ê¸ˆê³  ìœ„ì— ì„¸ ê¶Œì˜ ì±…. ê°ê° í¬ìŠ¤íŠ¸ì‡ì´ ê½‚í˜€ìˆë‹¤.`,
        question: `ì„ ì¥ì‹¤ ê¸ˆê³  ìœ„ì— ì±… ì„¸ ê¶Œì´ ë†“ì—¬ìˆê³  ê°ê° í¬ìŠ¤íŠ¸ì‡ì´ ê½‚í˜€ìˆë‹¤.

<b>ğŸ“• "í•´ì–‘ë²• ê°œë¡ " â†’ í‘œì‹œëœ ë‹¨ì–´: "ëŒ€í•œë¯¼êµ­"
ğŸ“— "í•­í•´ìˆ ì˜ ì—­ì‚¬" â†’ í‘œì‹œëœ ë‹¨ì–´: "ë‚˜ì¹¨ë°˜"
ğŸ“˜ "ì„ ë°• êµ¬ì¡°í•™" â†’ í‘œì‹œëœ ë‹¨ì–´: "ìš©ê³¨"</b>

ê¸ˆê³  ë©”ëª¨: "ê° ë‹¨ì–´ì˜ ê¸€ì ìˆ˜ê°€ ë¹„ë°€ë²ˆí˜¸ë‹¤."

ì„¸ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì´ì–´ì„œ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'ëŒ€í•œë¯¼êµ­ = 4ê¸€ì, ë‚˜ì¹¨ë°˜ = 3ê¸€ì, ìš©ê³¨ = 2ê¸€ì',
        validate: i => i.replace(/\s/g,'') === '432' },
      { type:'general', title:'ğŸ“¦ í¼ì¦ 2: í™”ë¬¼ ì í•˜ ëª©ë¡',
        story: `ê¸ˆê³  ì•ˆ, "HELP." í•œ ë‹¨ì–´. ì í•˜ ëª©ë¡ì—ì„œ ë¹¨ê°„ ì¤„ ê·¸ì€ í•­ëª© ë°œê²¬. "íŠ¹ìˆ˜ í™”ë¬¼ #7 â€” ë°œì†¡ì§€ í™•ì¸ ìš”ë§." ì´ í™”ë¬¼ì´ í•µì‹¬ì´ë‹¤.

<b>ğŸ“¦ íŠ¹ìˆ˜ í™”ë¬¼ #7 ìƒì„¸ ì •ë³´
ê¸¸ì´: 120cm
í­: 80cm  
ë†’ì´: 50cm
ë¶€í”¼ = ê¸¸ì´ Ã— í­ Ã— ë†’ì´ = ? cmÂ³</b>

ì„ ì¥ì´ ë¹¨ê°„ íœìœ¼ë¡œ ë©”ëª¨: "ë¶€í”¼ ê³„ì‚°ì´ í•µì‹¬ì´ë‹¤."`,
        question: `í™”ë¬¼ #7ì˜ ë¶€í”¼ë¥¼ ê³„ì‚°í•˜ë¼.

<b>í™”ë¬¼ ê·œê²©:</b>
- ê¸¸ì´: 120cm
- í­: 80cm
- ë†’ì´: 50cm

<b>ë¶€í”¼ ê³µì‹:</b> ê¸¸ì´ Ã— í­ Ã— ë†’ì´

120 Ã— 80 Ã— 50 = ? cmÂ³`,
        hint: '120 Ã— 80 Ã— 50 = ?',
        validate: i => i.replace(/[^\d]/g,'') === '480000' || i.trim() === '480000' },
      { type:'general', title:'âš“í¼ì¦ 3: ê¸°ê´€ì‹¤ì˜ ì´ì§„ë²•',
        story: `"ê¸°ê´€ì‹¤ì— ê¸°ë¡ì´ ìˆë‹¤." ì—”ì§„ì€ ë©ˆì¶°ìˆë‹¤. ì—°ë£ŒëŠ” ì¶©ë¶„í•œë°. ëˆ„êµ°ê°€ ì¼ë¶€ëŸ¬ ì •ì§€ì‹œì¼°ë‹¤. ë°°ì „ë°˜ì— 12ê°œì˜ ìŠ¤ìœ„ì¹˜. ì´ì§„ë²•ì´ë‹¤.

<b>ìœ„ ì•„ë˜ ì•„ë˜ ìœ„ | ì•„ë˜ ìœ„ ì•„ë˜ ì•„ë˜ | ì•„ë˜ ì•„ë˜ ìœ„ ìœ„</b>

ë°°ì „ë°˜ ì˜†ì— ê¸°ê´€ì¥ì˜ ë©”ëª¨:
"ì´ì§„ë²•ì´ë‹¤. ìœ„=1, ì•„ë˜=0. 4ìë¦¬ì”© ëŠì–´ì„œ ì‹­ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ë©´ ë‚´ ì‚¬ë¬¼í•¨ ë²ˆí˜¸ê°€ ë‚˜ì˜¨ë‹¤."`,
        question: `ë°°ì „ë°˜ì˜ ì´ì§„ë²•ì„ í•´ë…í•˜ë¼.

<b>1001 | 0100 | 0011</b>
(ìœ„ì•„ë˜ì•„ë˜ìœ„ | ì•„ë˜ìœ„ì•„ë˜ì•„ë˜ | ì•„ë˜ì•„ë˜ìœ„ìœ„)

ê° 4ìë¦¬ ì´ì§„ìˆ˜ë¥¼ ì‹­ì§„ìˆ˜ë¡œ ë³€í™˜í•˜ë©´?
(ì„¸ ìˆ«ìë¥¼ ì´ì–´ì„œ ì…ë ¥. ì˜ˆ: "123")`,
        hint: '1001(2ì§„) = 8+0+0+1 = 9, 0100(2ì§„) = 0+4+0+0 = 4, 0011(2ì§„) = 0+0+2+1 = 3',
        validate: i => i.replace(/\s/g,'') === '943' },
      { type:'general', title:'ğŸ“» í¼ì¦ 4: ë¬´ì „ê¸° SOS ì‹ í˜¸',
        story: `ê¸°ê´€ì¥ ë°•ì² ìˆ˜ì˜ ë…¸íŠ¸. "ì„ ì¥ì´ í™”ë¬¼ #7ì„ ì¡°ì‚¬ ì¤‘. ë‚˜ë„ ì¶”ì í•˜ê³  ìˆë‹¤." ë¬´ì „ê¸°ì—ì„œ SOSê°€ ìë™ ì†¡ì¶œë˜ê³  ìˆë‹¤.

<b>ğŸ“» ëª¨ìŠ¤ ë¶€í˜¸ SOS
S = ... (ì§§ì€ ì†Œë¦¬ 3ê°œ)
O = --- (ê¸´ ì†Œë¦¬ 3ê°œ)  
S = ... (ì§§ì€ ì†Œë¦¬ 3ê°œ)

ì „ì²´: ... --- ... (ì´ ëª‡ ê°œì˜ ì‹ í˜¸?)</b>

ë…¸íŠ¸ì— ë©”ëª¨: "SOS ì‹ í˜¸ì˜ ì´ ìŒí–¥ ê°œìˆ˜ê°€ ë‹¤ìŒ ë‹¨ì„œë‹¤."`,
        question: `SOS ëª¨ìŠ¤ ë¶€í˜¸ì˜ ì´ ì‹ í˜¸ ê°œìˆ˜ë¥¼ ì„¸ì–´ë¼.

<b>SOS ëª¨ìŠ¤ ë¶€í˜¸:</b>
S = ... (ì  3ê°œ)
O = --- (ì„  3ê°œ)
S = ... (ì  3ê°œ)

ì ê³¼ ì„ ì„ ëª¨ë‘ í•©ì³ì„œ ì´ ëª‡ ê°œì˜ ì‹ í˜¸ì¸ê°€?`,
        hint: 'S(...) = 3ê°œ, O(---) = 3ê°œ, S(...) = 3ê°œ. ì´ 3 + 3 + 3 = ?',
        validate: i => i.trim() === '9' },
      { type:'cpq', cpqIndex:0,
        story: `"23:50 â€” ê°‘íŒì—ì„œ ì´ìƒí•œ ë¹›. ì„ ì›ë“¤ì´ ì˜¬ë¼ê°€ê³  ìˆë‹¤. ë‚˜ë„â€”" ì—¬ê¸°ì„œ ëŠê¸´ë‹¤. ë…¸íŠ¸ì— ì íŒ ì¥ì†Œ. ì„ ì› ì‹¤ì¢…ì˜ ì§„ì§œ ì›ì¸ì´ ê±°ê¸° ìˆë‹¤. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `ê¸°ê´€ì¥ë„ ì„ ì¥ê³¼ ê°™ì€ ê²ƒì„ ì«“ê³  ìˆì—ˆë‹¤. ë…¸íŠ¸ ë’·ë©´: "í•´ì¹˜ ì½”ë“œë¥¼ ë‚¨ê¸´ë‹¤. ê°‘íŒì˜ í¼ì¦ì„ í’€ì–´ë¼." ê°‘íŒìœ¼ë¡œ.` }
    ]
  },
  {
    id: 'hotel', emoji: 'ğŸ¨', name: 'í˜¸í…” ë¯¸ìŠ¤í„°ë¦¬',
    desc: 'VIPê°€ ì²´í¬ì¸ 47ë¶„ ë§Œì— ì¦ë°œí–ˆë‹¤. 1408í˜¸, ì§ë„ ì—¬ê¶Œë„ ê·¸ëŒ€ë¡œ. ë¬¸ë§Œ ì ê²¨ ìˆë‹¤.',
    difficulty: 3, time: '15ë¶„',
    intro: `ê·¸ëœë“œ íŒŒí¬ í˜¸í…” 1408í˜¸. IT ëŒ€í‘œ ë°•ì¤€í˜¸, ì²´í¬ì¸ 47ë¶„ í›„ ì¦ë°œ. CCTVì—” ë°©ì— ë“¤ì–´ê°„ ê²Œ ë§ˆì§€ë§‰ì´ë‹¤. ì§ë„ ì—¬ê¶Œë„ ê·¸ëŒ€ë¡œ. ë³´ì•ˆíŒ€ì¥ì¸ ë‹¹ì‹ ì´ ë“¤ì–´ì„°ì§€ë§Œ, ë¬¸ì´ ì ê²¼ë‹¤. ì´ ë°©ì—ëŠ” ë¹„ë°€ì´ ìˆë‹¤.`,
    puzzles: [
      { type:'general', title:'ğŸ”‘ í¼ì¦ 1: íˆ¬ìˆ™ê°ì˜ ë…¸íŠ¸ë¶',
        story: `ë…¸íŠ¸ë¶ì´ ì—´ë ¤ìˆë‹¤. ì ê¸ˆ í™”ë©´. ì˜†ì— ë©”ëª¨: "1408 â€” ë¶ˆê¸¸í•œ ìˆ«ì." í™”ë©´ì— ì´ëª¨ì§€ ìˆ˜ì‹ì´ ê¹œë¹¡ì¸ë‹¤.`,
        question: `ë…¸íŠ¸ë¶ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ë¼.

í™”ë©´ì— ì´ëª¨ì§€ ìˆ˜ì‹ì´ í‘œì‹œë˜ì–´ ìˆë‹¤:

<b>ğŸ¨ + ğŸ¨ = 28
ğŸ”‘ Ã— ğŸ”‘ = 16
ğŸ¨ - ğŸ”‘ = ?</b>

? ì— ë“¤ì–´ê°ˆ ìˆ«ìëŠ”?`,
        hint: 'ğŸ¨+ğŸ¨=28ì´ë©´ ğŸ¨=14. ğŸ”‘Ã—ğŸ”‘=16ì´ë©´ ğŸ”‘=4. 14-4=?',
        validate: i => i.trim()==='10' },
      { type:'general', title:'ğŸ’» í¼ì¦ 2: ê²€ìƒ‰ ê¸°ë¡ ë¶„ì„',
        story: `ë…¸íŠ¸ë¶ì´ ì—´ë ¸ë‹¤. ë§ˆì§€ë§‰ ê²€ìƒ‰ ì‹œê°, ì‚¬ë¼ì§€ê¸° 17ë¶„ ì „. ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ë¬´ê´€í•œ ì´ìƒí•œ í‚¤ì›Œë“œë“¤.

<b>ğŸ’» ê²€ìƒ‰ ê¸°ë¡ (ì‹œê°„ ìˆœ)
21:15 - "M&A ì‹¤ì‚¬ ì ˆì°¨"  
21:22 - "ê³„ì•½ì„œ ê²€í†  ìš”ë ¹"
21:28 - "í˜¸í…” 1408í˜¸ ë¹„ë°€"  
21:30 - "ìˆ«ì 7ì˜ ì˜ë¯¸"</b>

ë©”ëª¨ ì•±ì´ ì—´ë ¤ìˆë‹¤: "ê²€ìƒ‰í•œ ìˆ«ìë“¤ì„ ë”í•˜ë©´ ë‹µì´ ë‚˜ì˜¨ë‹¤."`,
        question: `ë°•ì¤€í˜¸ì˜ ê²€ìƒ‰ ê¸°ë¡ì—ì„œ ìˆ«ìë¥¼ ì°¾ì•„ë¼.

<b>ê²€ìƒ‰ í‚¤ì›Œë“œë“¤:</b>
- "M&A ì‹¤ì‚¬ ì ˆì°¨" â†’ ìˆ«ì ì—†ìŒ
- "ê³„ì•½ì„œ ê²€í†  ìš”ë ¹" â†’ ìˆ«ì ì—†ìŒ  
- "í˜¸í…” 1408í˜¸ ë¹„ë°€" â†’ 1408
- "ìˆ«ì 7ì˜ ì˜ë¯¸" â†’ 7

1408 + 7 = ?`,
        hint: '1408 + 7 = ?',
        validate: i => i.trim() === '1415' },
      { type:'general', title:'ğŸª í¼ì¦ 3: ìš•ì‹¤ ê±°ìš¸ì˜ ë©”ì‹œì§€',
        story: `ë©”ëª¨ ì•±ì— ëˆ„êµ°ê°€ ì ì–´ë†¨ë‹¤. ë°•ì¤€í˜¸ì˜ ê¸€ì”¨ê°€ ì•„ë‹ˆë‹¤. "ê±°ìš¸ ë’¤ì— ì§„ì‹¤ì´ ìˆë‹¤." ìš•ì‹¤ ê±°ìš¸ì— ì˜¨ìˆ˜ë¥¼ í‹€ì, ê¹€ ì„œë¦° í‘œë©´ì— ìˆ«ìê°€ ë– ì˜¤ë¥¸ë‹¤. ê±°ìš¸ì´ë‹ˆê¹Œ ì¢Œìš°ê°€ ë°˜ì „ëë‹¤.`,
        question: `ê±°ìš¸ì— ìˆ«ìê°€ ë‚˜íƒ€ë‚¬ë‹¤. ê±°ìš¸ì´ë¯€ë¡œ ì¢Œìš°ê°€ ë°˜ì „ë˜ì–´ ë³´ì¸ë‹¤.

ê±°ìš¸ì— ë¹„ì¹œ ìˆ«ì: <b>5765</b>

ì´ ìˆ«ìë“¤ì„ ê±°ìš¸ì— ë¹„ì¶”ë©´ ì¢Œìš°ë°˜ì „ëœë‹¤.
ì‹¤ì œ ìˆ«ì(ê±°ìš¸ ë°”ê¹¥ì—ì„œ ë³¸ ì›ë˜ ìˆ«ì)ë¥¼ ì…ë ¥í•˜ë¼.

(íŒíŠ¸: ìˆ«ì ìˆœì„œê°€ ë’¤ì§‘íŒë‹¤)`,
        hint: 'ê±°ìš¸ì€ ì¢Œìš°ë¥¼ ë°˜ì „ì‹œí‚¨ë‹¤. 5765ë¥¼ ê±°ìš¸ì— ë¹„ì¶”ë©´ ìˆœì„œê°€ ë’¤ì§‘í˜€ì„œ 5675ê°€ ëœë‹¤.',
        validate: i => i.trim()==='5675' },
      { type:'general', title:'ğŸ“… í¼ì¦ 4: ì¼ì •í‘œì˜ ì•”í˜¸',
        story: `íƒ€ì¼ ë°‘ì— ê¸ˆê³ . í˜¸í…” ë¹„í’ˆì´ ì•„ë‹ˆë‹¤. ëˆ„ê°€ ì„¤ì¹˜í•œ ê±°ì§€? ì´ë¯¸ ì—´ë ¤ìˆë‹¤. ë°•ì¤€í˜¸ì˜ ë¹„ë°€ ì¼ì •í‘œ.`,
        question: `ë°•ì¤€í˜¸ì˜ ì¼ì •í‘œë¥¼ ë¶„ì„í•˜ë¼.

<b>ê° ë¯¸íŒ…ë³„ ì°¸ì„ì ìˆ˜:</b>
- 09:00 Aì‚¬ ë¯¸íŒ…: 3ëª…
- 14:00 Bì‚¬ ê²€í† : 2ëª…
- 16:30 Cì‚¬ í˜‘ì˜: 4ëª…  
- 19:00 ì €ë… ì‹ì‚¬: 1ëª…

ì´ ì°¸ì„ì ìˆ˜ëŠ”? 3 + 2 + 4 + 1 = ?`,
        hint: '3 + 2 + 4 + 1 = ?',
        validate: i => i.trim() === '10' },
      { type:'cpq', cpqIndex:0,
        story: `ê¸ˆê³  ì•ˆ í¸ì§€. ë°•ì¤€í˜¸ëŠ” ì‹¤ì¢…ëœ ê²Œ ì•„ë‹ˆë‹¤. ìŠ¤ìŠ¤ë¡œ ì‚¬ë¼ì¡Œë‹¤. í˜¸í…”ì€ ê±°ì ì¼ ë¿. ì§„ì§œ ëª©ì ì§€ê°€ ë”°ë¡œ ìˆë‹¤. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `í¸ì§€ ë’·ë©´: "ì¹¨ëŒ€ í—¤ë“œë³´ë“œ ë’¤, ë¹„ë°€ í†µë¡œ." ë°•ì¤€í˜¸ëŠ” ì´ í†µë¡œë¥¼ ì•Œê³  ì´ ë°©ì„ ì§€ì •í–ˆë‹¤.` }
    ]
  },
  {
    id: 'hospital', emoji: 'ğŸ¥', name: 'íë³‘ì› 304í˜¸',
    desc: 'íì‡„ëœ ë³‘ì›, 304í˜¸. ë°¤ë§ˆë‹¤ ë¶ˆì´ ì¼œì§„ë‹¤. 10ë…„ ì „ ê·¸ë‚  ë°¤, ë¬´ìŠ¨ ì¼ì´ ìˆì—ˆë‚˜.',
    difficulty: 2, time: '15ë¶„',
    intro: `ì„±ëª¨ë³‘ì›, 10ë…„ ì „ ì˜ë£Œì‚¬ê³ ë¡œ íì‡„. ê·¸ëŸ°ë° 304í˜¸ì—ì„œ ë°¤ë§ˆë‹¤ ë¶ˆë¹›ì´ ì¼œì§„ë‹¤. ê²½ë¹„ì›ì¸ ë‹¹ì‹ ì´ ë“¤ì–´ì„°ê³ , ë¬¸ì´ ì ê²¼ë‹¤. ì©ì€ ëƒ„ìƒˆ, ì‚ê±±ê±°ë¦¬ëŠ” ì†Œë¦¬, ë³µë„ ë ì‹ ìŒ. 10ë…„ ì „ì˜ ì§„ì‹¤ì„ íŒŒí—¤ì³ë¼.`,
    puzzles: [
      { type:'general', title:'ğŸ’Š í¼ì¦ 1: í™˜ì ì°¨íŠ¸ì˜ ì•”í˜¸',
        story: `ì¹¨ëŒ€ ì˜†, ë‚¡ì€ í™˜ì ì°¨íŠ¸. ë§ˆì§€ë§‰ ê¸°ë¡: "ë°•ë¯¼ìˆ˜, 45ì„¸." ê°„í˜¸ì‚¬ì˜ ë©”ëª¨: "ë³µìš©ëŸ‰ì´ ì—´ì‡ ë‹¤." ì¹¨ëŒ€ ì•„ë˜ ê¸ˆê³ .`,
        question: `í™˜ì ì°¨íŠ¸ë¥¼ ë¶„ì„í•˜ë¼.

<b>ì²˜ë°©ì „ ë‚´ìš©:</b>
- ë§¤ì¼ 3íšŒ ë³µìš©
- ì•„ì¹¨: 2ì •
- ì ì‹¬: 1ì •  
- ì €ë…: 3ì •

í™˜ìê°€ í•˜ë£¨ì— ë³µìš©í•˜ëŠ” <b>ì´ ì•Œì•½ ìˆ˜</b>ë¥¼ ê³„ì‚°í•˜ì—¬ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'ì•„ì¹¨ 2ì • + ì ì‹¬ 1ì • + ì €ë… 3ì • = ?',
        validate: i => i.trim() === '6' },
      { type:'general', title:'ğŸ“‹ í¼ì¦ 2: ì˜ì‚¬ì˜ ì§„ë£Œ ê¸°ë¡',
        story: `ê¸ˆê³  ì•ˆ, ê¹€ì˜í˜¸ ì˜ì‚¬ì˜ ìˆ˜ì²©. "í™˜ìë“¤ì´ ê°‘ìê¸° ì•…í™”ë˜ê³  ìˆë‹¤. ì›ì¸ ì¡°ì‚¬ ì¤‘." ì§„ë£Œ ê¸°ë¡ì´ ì í˜€ìˆë‹¤.`,
        question: `ê¹€ ì˜ì‚¬ì˜ ì£¼ê°„ ì§„ë£Œ í™˜ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ìš”ì¼ë³„ ì§„ë£Œ í™˜ì:</b>
- ì›”ìš”ì¼: 12ëª…
- í™”ìš”ì¼: 8ëª…
- ìˆ˜ìš”ì¼: 15ëª…  
- ëª©ìš”ì¼: 6ëª…
- ê¸ˆìš”ì¼: 9ëª…

ì¼ì£¼ì¼ ì´ ì§„ë£Œ í™˜ì ìˆ˜ëŠ”?
12 + 8 + 15 + 6 + 9 = ?`,
        hint: '12 + 8 + 15 + 6 + 9 = ?',
        validate: i => i.trim() === '50' },
      { type:'general', title:'ğŸ”¬ í¼ì¦ 3: ì°½ê°€ì˜ í™”í•™ ê³µì‹',
        story: `"ì§„ì‹¤ì„ ë°œê²¬í–ˆë‹¤. ê·¸ë“¤ì´ ì«“ê³  ìˆë‹¤." ì°½ê°€ ì‹¤í—˜ëŒ€ì— ê¹€ ì˜ì‚¬ê°€ ë‚¨ê¸´ í™”í•™ ê³µì‹.`,
        question: `í™”í•™ ê³µì‹ì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” ëª¨ë“  ì›ì†Œë¥¼ ì°¾ì•„ë¼.

<b>Hâ‚‚O + NaCl = ?
2Hâ‚‚ + Oâ‚‚ = 2Hâ‚‚O  
Câ‚†Hâ‚â‚‚Oâ‚† + 6Oâ‚‚ = 6COâ‚‚ + 6Hâ‚‚O</b>

ë“±ì¥í•˜ëŠ” ì›ì†Œ: H(ìˆ˜ì†Œ), O(ì‚°ì†Œ), Na(ë‚˜íŠ¸ë¥¨), Cl(ì—¼ì†Œ), C(íƒ„ì†Œ)

<b>ê° ì›ì†Œì˜ ì²« ê¸€ì</b>ë¥¼ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•˜ë©´?
(H, O, N, C, C ìˆœì„œë¡œ)`,
        hint: 'H=ìˆ˜ì†Œ=H, O=ì‚°ì†Œ=O, Na=ë‚˜íŠ¸ë¥¨=N, Cl=ì—¼ì†Œ=C, C=íƒ„ì†Œ=C',
        validate: i => i.toUpperCase().replace(/\s/g,'') === 'HONCC' },
      { type:'general', title:'ğŸ—‚ï¸í¼ì¦ 4: ìµœì¢… ì¡°ì‚¬ ë³´ê³ ì„œ',
        story: `ì°½ë¬¸ ì†ì¡ì´ ë’¤ ë¹„ë°€ ì„œë. ê¹€ ì˜ì‚¬ì˜ ìµœì¢… ë³´ê³ ì„œ. "íì‡„ì˜ ì§„ì§œ ì›ì¸ì„ ì°¾ì•˜ë‹¤."`,
        question: `ë³‘ì› ì „ì²´ ì¸ì›ì„ ê³„ì‚°í•˜ë¼.

<b>ê° ê·¸ë£¹ë³„ ì¸ì›:</b>
- ì…ì› í™˜ì: 45ëª…
- ì™¸ë˜ í™˜ì: 128ëª…
- ì˜ë£Œì§„: 23ëª…  
- ê´€ë¦¬ì§: 14ëª…

ì´ ì¸ì›ì€ ëª‡ ëª…ì¸ê°€?
45 + 128 + 23 + 14 = ?`,
        hint: '45 + 128 + 23 + 14 = ?',
        validate: i => i.trim() === '210' },
      { type:'cpq', cpqIndex:0,
        story: `"304í˜¸ì˜ ì§„ì§œ ë¹„ë°€. ë” í° ìŒëª¨ê°€ ìˆë‹¤." ê¹€ ì˜ì‚¬ê°€ ëª©ìˆ¨ ê±¸ê³  ì¶”ì í•œ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `ë³´ê³ ì„œ ë’·ë©´: "ì¹¨ëŒ€ ì•„ë˜ íƒ€ì¼. íƒˆì¶œ ì½”ë“œê°€ ìˆë‹¤." ì¹¨ëŒ€ë¡œ.` }
    ]
  },
  {
    id: 'magician', emoji: 'ğŸª', name: 'ë§ˆìˆ ì‚¬ì˜ ë¹„ë°€ ë°©',
    desc: 'ë§ˆìˆ ì‚¬ê°€ ë¬´ëŒ€ì—ì„œ ì‚¬ë¼ì¡Œë‹¤. ì´ë²ˆì—” íŠ¸ë¦­ì´ ì•„ë‹ˆë‹¤. ì¼ì£¼ì¼ì§¸ í–‰ë°©ë¶ˆëª….',
    difficulty: 1, time: '12ë¶„',
    intro: `ë§ˆìˆ ì‚¬ ìµœí˜„ìš°, "ëŒ€íƒˆì¶œ" ê³µì—° ì¤‘ ì‚¬ë¼ì¡Œë‹¤. ì¼ì£¼ì¼ì§¸ í–‰ë°©ë¶ˆëª…. ê²½ì°°ì€ í¬ê¸°í–ˆì§€ë§Œ ë§¤ë‹ˆì €ì¸ ë‹¹ì‹ ì€ ì•„ë‹ˆë‹¤. ê·¹ì¥ ë’¤í¸ ë¹„ë°€ ë°©ì— ì ì…í–ˆì§€ë§Œ, ë§ˆìˆ  ì¥ì¹˜ê°€ ì‘ë™í•˜ë©° ë¬¸ì´ ë´‰ì‡„ëë‹¤. ê·¸ì˜ ë§ˆì§€ë§‰ íŠ¸ë¦­ì„ í’€ì–´ë¼.`,
    puzzles: [
      { type:'general', title:'ğŸƒ í¼ì¦ 1: ë§ˆìˆ ì‚¬ì˜ ì¹´ë“œ íŠ¸ë¦­',
        story: `ë²¨ë²³ í…Œì´ë¸” ìœ„, ì¹´ë“œê°€ íŒ¨í„´ìœ¼ë¡œ í¼ì³ì ¸ ìˆë‹¤. ë©”ëª¨: "ë‚´ ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ë§ˆìˆ  â€” ìˆ˜í•™ì˜ ë§ˆë²•."`,
        question: `ì¹´ë“œ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>â™ A(1) â™ 2 â™ 3 â™ 4 â™ 5</b> â† +1ì”©
<b>â™¥2 â™¥4 â™¥6 â™¥8 â™¥?</b> â† +2ì”©  
<b>â™¦1 â™¦3 â™¦5 â™¦7 â™¦?</b> â† +2ì”©
<b>â™£3 â™£6 â™£9 â™£12 â™£?</b> â† +3ì”©

ê° ì¤„ì˜ ë¬¼ìŒí‘œì— ë“¤ì–´ê°ˆ ìˆ«ìëŠ”?
â™¥=?, â™¦=?, â™£=?

ì„¸ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ì‹œì˜¤. (ì˜ˆ: "10911")`,
        hint: 'â™¥: 2,4,6,8,? â†’ 10, â™¦: 1,3,5,7,? â†’ 9, â™£: 3,6,9,12,? â†’ 15',
        validate: i => i.replace(/\s/g,'') === '10915' },
      { type:'general', title:'ğŸ“” í¼ì¦ 2: ë‹¤ì´ì–´ë¦¬ì˜ ì•”í˜¸',
        story: `ê¸ˆê³  ì•ˆ ë‹¤ì´ì–´ë¦¬. "ê·¸ë“¤ì´ ì«“ê³  ìˆë‹¤. ë‚´ê°€ ë°œê²¬í•œ ë¹„ë°€ ë•Œë¬¸ì´ë‹¤." ê³µì—° ê¸°ë¡ì´ ì í˜€ìˆë‹¤.`,
        question: `ìµœí˜„ìš°ì˜ ì´ ê³µì—° íšŸìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ì›”ë³„ ê³µì—° íšŸìˆ˜:</b>
- 1ì›”: 8íšŒ
- 2ì›”: 12íšŒ
- 3ì›”: 6íšŒ  
- 4ì›”: 15íšŒ
- 5ì›”: 9íšŒ

ì´ ê³µì—° íšŸìˆ˜ëŠ”?
8 + 12 + 6 + 15 + 9 = ?`,
        hint: '8 + 12 + 6 + 15 + 9 = ?',
        validate: i => i.trim() === '50' },
      { type:'general', title:'ğŸª í¼ì¦ 3: ë§ˆë²•ì˜ ê±°ìš¸',
        story: `"ë§ˆì§€ë§‰ ë‹¨ì„œëŠ” ê±°ìš¸ ì†ì—." ë²½ë©´ì˜ ë§ˆìˆ  ê±°ìš¸ì— ì†ì„ ëŒ€ì, LED íŒ¨í„´ì´ ë– ì˜¤ë¥¸ë‹¤.`,
        question: `ê±°ìš¸ì˜ LED íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>â— â—‹ â— â—‹ â—</b> â† 3ê°œ
<b>â—‹ â— â—‹ â— â—‹</b> â† 2ê°œ
<b>â— â—‹ â—‹ â—‹ â—</b> â† 2ê°œ
<b>â—‹ â— â—‹ â— â—‹</b> â† 2ê°œ
<b>â— â—‹ â— â—‹ â—‹</b> â† 2ê°œ

ê²€ì€ ì (â—)ì˜ ì´ ê°œìˆ˜ëŠ”?`,
        hint: 'ê° ì¤„ì„ ì°¨ë¡€ëŒ€ë¡œ ì„¸ì–´ë³´ì. 1ì¤„(3) + 2ì¤„(2) + 3ì¤„(2) + 4ì¤„(2) + 5ì¤„(2) = ?',
        validate: i => i.trim() === '11' },
      { type:'general', title:'ğŸ© í¼ì¦ 4: ë§ˆìˆ  ë„êµ¬ì˜ ê°œìˆ˜',
        story: `ê±°ìš¸ì´ íšŒì „í•œë‹¤. ë’¤í¸ ì„œë. "ëª¨ë“  í¼ì¦ì´ ì—°ê²°ëœë‹¤." ë§ˆìˆ  ë„êµ¬ ëª©ë¡ì´ ë“¤ì–´ìˆë‹¤.`,
        question: `ìµœí˜„ìš°ì˜ ë§ˆìˆ  ë„êµ¬ ì´ ê°œìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ê° ë„êµ¬ë³„ ê°œìˆ˜:</b>
- ì‹¤í¬ ìŠ¤ì¹´í”„: 7ê°œ
- íŠ¸ëŸ¼í”„ ì¹´ë“œ: 12ë²Œ
- ë§ˆìˆ  ì§€íŒ¡ì´: 3ê°œ  
- ê±°ìš¸: 5ê°œ
- ë™ì „: 20ê°œ

ì´ ëª‡ ê°œì˜ ë„êµ¬ì¸ê°€?
7 + 12 + 3 + 5 + 20 = ?`,
        hint: '7 + 12 + 3 + 5 + 20 = ?',
        validate: i => i.trim() === '47' },
      { type:'cpq', cpqIndex:0,
        story: `"ëŒ€íƒˆì¶œì€ ê³µì—°ì´ ì•„ë‹ˆì—ˆë‹¤." ìµœí˜„ìš°ê°€ ë§ˆì§€ë§‰ìœ¼ë¡œ í–¥í•˜ë ¤ë˜ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ ì¸¡ì •í•˜ë¼.`,
        storyAfter: `"ì‹¤í¬ ìŠ¤ì¹´í”„ ì•„ë˜ ë§ˆì§€ë§‰ ì¥ì¹˜ê°€ ìˆë‹¤." ë§ˆìˆ ì‚¬ì˜ ì§„ì§œ ë§ˆì§€ë§‰ íŠ¸ë¦­.` }
    ]
  },
  {
    id: 'school', emoji: 'ğŸ«', name: 'ì•¼ê°„ í•™êµì˜ ë¹„ë°€',
    desc: 'ì•¼ì ì¤‘ í•™ìƒ 3ëª…ì´ ë™ì‹œì— ì‚¬ë¼ì¡Œë‹¤. ì¹ íŒì— ì˜ë¬¸ì˜ ìˆ«ìë§Œ ë‚¨ì•„ìˆë‹¤.',
    difficulty: 2, time: '14ë¶„',
    intro: `ì„¸ì¢…ê³  3í•™ë…„ 2ë°˜. ì•¼ì ì¤‘ í•™ìƒ 3ëª…ì´ ë™ì‹œì— ì‚¬ë¼ì¡Œë‹¤. ì±…ìƒì€ ì—ì–´ì ¸ ìˆê³ , ì¹ íŒì—” ì˜ë¬¸ì˜ ìˆ«ì. ë‹´ì„ì¸ ë‹¹ì‹ ì´ ë°¤ëŠ¦ê²Œ ì™”ì§€ë§Œ, ë¬¸ì´ ì ê¸°ê³  ì „ë“±ì´ êº¼ì¡Œë‹¤. ë¹„ìƒë“±ë§Œ ê¹œë¹¡ì´ëŠ” êµì‹¤. í•™ìƒë“¤ì˜ í”ì ì„ ë”°ë¼ê°€ë¼.`,
    puzzles: [
      { type:'general', title:'ğŸ“š í¼ì¦ 1: ì‚¬ë¬¼í•¨ì˜ ì¡°í•©',
        story: `ê¹€ë¯¼ìˆ˜ì˜ ì‚¬ë¬¼í•¨ì´ ë°˜ì¯¤ ì—´ë ¤ìˆë‹¤. ë¬¸ì— ì—°í•„ë¡œ ì ì–´ë‘” ë©”ëª¨.`,
        question: `ë¯¼ìˆ˜ì˜ ì‚¬ë¬¼í•¨ ì¡°í•©ì„ ê³„ì‚°í•˜ë¼.

<b>íŒíŠ¸ í•´ì„:</b>
- ì²« ë²ˆì§¸: ë°˜ ë²ˆí˜¸(2) Ã— 2 = ?
- ë‘ ë²ˆì§¸: ìƒì¼ ì›”(12) + ì¼(8) = ?  
- ì„¸ ë²ˆì§¸: ì°½ê°€ë¶€í„° ì¤„ ìˆ˜ = 5

ì„¸ ìˆ«ìë¥¼ ì´ì–´ì„œ ì…ë ¥í•˜ì‹œì˜¤. (ì˜ˆ: "4205")`,
        hint: '2Ã—2=4, 12+8=20, ì¤„ ìˆ˜=5 â†’ "4205"',
        validate: i => i.replace(/\s/g,'') === '4205' },
      { type:'general', title:'ğŸ“ í¼ì¦ 2: í•™ìŠµ ê³„íší‘œ',
        story: `ì‚¬ë¬¼í•¨ ì•ˆ ìª½ì§€. "ì˜¤ëŠ˜ ë°¤ ë¹„ë°€ì„ í™•ì¸í•˜ëŸ¬ ê°„ë‹¤. ì„ ìƒë‹˜ì´ ìˆ¨ê¸°ê³  ìˆëŠ” ì§„ì‹¤ì´ ìˆë‹¤." í•™ìŠµ ê³„íší‘œê°€ í•¨ê»˜ ìˆë‹¤.`,
        question: `ë¯¼ìˆ˜ì˜ ì£¼ê°„ ì´ ììŠµ ì‹œê°„ì„ ê³„ì‚°í•˜ë¼.

<b>ìš”ì¼ë³„ ììŠµ ì‹œê°„:</b>
- ì›”ìš”ì¼: 3ì‹œê°„
- í™”ìš”ì¼: 5ì‹œê°„
- ìˆ˜ìš”ì¼: 2ì‹œê°„  
- ëª©ìš”ì¼: 4ì‹œê°„
- ê¸ˆìš”ì¼: 6ì‹œê°„

ì´ ëª‡ ì‹œê°„ ììŠµí–ˆëŠ”ê°€?
3 + 5 + 2 + 4 + 6 = ?`,
        hint: '3 + 5 + 2 + 4 + 6 = ?',
        validate: i => i.trim() === '20' },
      { type:'general', title:'ğŸ“ í¼ì¦ 3: ì¹ íŒì˜ ìˆ˜í•™ ë¬¸ì œ',
        story: `"ì§„ì§œ ë¹„ë°€ì€ ì¹ íŒ ë’¤ì—. ì„ ìƒë‹˜ë„ ëª¨ë¥´ëŠ” í•™êµì˜ ì—­ì‚¬." ì¹ íŒì— í’€ë‹¤ ë§Œ ìˆ˜í•™ ë¬¸ì œ.`,
        question: `ë‹¤ê°í˜• ë‚´ê°ì˜ í•© ê³µì‹ì„ ì ìš©í•˜ë¼.

<b>íŒ¨í„´ ë¶„ì„:</b>
- ì‚¼ê°í˜•(3): (3-2) Ã— 180 = 180Â°
- ì‚¬ê°í˜•(4): (4-2) Ã— 180 = 360Â°
- ì˜¤ê°í˜•(5): (5-2) Ã— 180 = 540Â°
- ìœ¡ê°í˜•(6): (6-2) Ã— 180 = ?

ì •ìœ¡ê°í˜•ì˜ ë‚´ê°ì˜ í•©ì€ ëª‡ ë„ì¸ê°€?`,
        hint: 'ìœ¡ê°í˜•ì€ 6ê°í˜•ì´ë‹ˆê¹Œ (6-2) Ã— 180 = 4 Ã— 180 = ?',
        validate: i => i.trim() === '720' },
      { type:'general', title:'ğŸ“° í¼ì¦ 4: ë¹„ë°€ ìë£Œì‹¤ì˜ ê¸°ë¡',
        story: `ì¹ íŒì´ ì›€ì§ì¸ë‹¤. ë’¤í¸ì— ë¹„ë°€ ìë£Œì‹¤. ì˜¤ë˜ëœ ì‹ ë¬¸ ìŠ¤í¬ë©: "í™”ì¬", "ì‹¤ì¢…", "ì€í." í•™êµì˜ ì–´ë‘ìš´ ì—­ì‚¬.`,
        question: `ì„¸ì¢…ê³ ë“±í•™êµì˜ ì´ ì‚¬ê±´ ìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ì—°ë„ë³„ ì‚¬ê±´ ìˆ˜:</b>
- 1995ë…„: 1ê±´ (í™”ì¬)
- 2003ë…„: 2ê±´ (ì‹¤ì¢…)
- 2010ë…„: 1ê±´ (ë¶•ê´´)  
- 2018ë…„: 3ê±´ (ì‹ì¤‘ë…)
- 2023ë…„: 3ê±´ (ì‹¤ì¢…)

ì´ ëª‡ ê±´ì˜ ì‚¬ê±´ì´ ë°œìƒí–ˆëŠ”ê°€?
1 + 2 + 1 + 3 + 3 = ?`,
        hint: '1 + 2 + 1 + 3 + 3 = ?',
        validate: i => i.trim() === '10' },
      { type:'cpq', cpqIndex:0,
        story: `í•™ìƒë“¤ì˜ ë§ˆì§€ë§‰ ë©”ì‹œì§€. "ì§„ì‹¤ì„ ì•Œì•˜ë‹¤. ì¦ê±°ëŠ” ì´ ì¥ì†Œì— ìˆë‹¤." ëª¨ë“  ì‚¬ê±´ì˜ ì—°ê²°ê³ ë¦¬. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `"ì„ ìƒë‹˜ ì±…ìƒ ì„œë. ë…¼ë¦¬ í¼ì¦ì´ ë§ˆì§€ë§‰ ê´€ë¬¸ì´ë‹¤." êµì‹¤ ì•ìœ¼ë¡œ.` }
    ]
  },
  {
    id: 'detective', emoji: 'ğŸ•µï¸', name: 'íƒì • ì‚¬ë¬´ì†Œì˜ ìˆ˜ìˆ˜ê»˜ë¼',
    desc: '"ê²°ì •ì  ë‹¨ì„œë¥¼ ì°¾ì•˜ë‹¤." ê·¸ ì „í™”ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ íƒì •ì´ ì‚¬ë¼ì¡Œë‹¤.',
    difficulty: 1, time: '11ë¶„',
    intro: `ì‚¬ë¦½íƒì • ì¥í˜œë¦°, 20ë…„ ê²½ë ¥. "ê²°ì •ì  ë‹¨ì„œë¥¼ ì°¾ì•˜ë‹¤"ëŠ” ì „í™”ë¥¼ ë§ˆì§€ë§‰ìœ¼ë¡œ 3ì¼ì§¸ ì—°ë½ ë‘ì ˆ. ì¡°ìˆ˜ì¸ ë‹¹ì‹ ì´ ì‚¬ë¬´ì†Œì— ì™”ì§€ë§Œ, ë¬¸ì´ ì ê¸°ê³  ìŒì„±ì´ ë“¤ë¦°ë‹¤. "ì§„ì§œ íƒì •ì´ë¼ë©´ ì´ê²ƒì„ í’€ì–´ë³´ë¼." ì¥í˜œë¦°ì˜ ë§ˆì§€ë§‰ í¼ì¦ì´ë‹¤.`,
    puzzles: [
      { type:'general', title:'ğŸ” í¼ì¦ 1: íƒì •ì˜ ì•Œë¦¬ë°”ì´ ì‹œê°„í‘œ',
        story: `ì±…ìƒ ìœ„, ì‚¬ê±´ ìˆ˜ì²©. 'í™©ê¸ˆ ìƒì† ì‚¬ê±´' ìš©ì˜ì 4ëª…ì˜ ì•Œë¦¬ë°”ì´ ì‹œê°„í‘œ.`,
        question: `ìš©ì˜ìë“¤ì˜ ì•Œë¦¬ë°”ì´ë¥¼ ë¶„ì„í•˜ë¼.

<b>9ì‹œ ~ 9ì‹œ30ë¶„ ë™ì•ˆ:</b>
- ê¹€ëŒ€í‘œ: ì§‘ì— ìˆìŒ (9ì‹œ ì§‘ ë„ì°©)
- ë°•ì°¨ì¥: ì˜í™” ê´€ëŒ ì¤‘ (9ì‹œ30ë¶„ ì¢…ë£Œ)
- ìµœë¶€ì¥: í¸ì˜ì ì—ì„œ ì§‘ìœ¼ë¡œ ì´ë™ ì¤‘  
- ì´ë¹„ì„œ: ì‚¬ìš°ë‚˜ì— ìˆìŒ

"9ì‹œë¶€í„° 9ì‹œ30ë¶„ ì‚¬ì´ì— <b>ììœ ì‹œê°„</b>ì´ ìˆì—ˆë˜ ì‚¬ëŒ"ì€ ëˆ„êµ¬ì¸ê°€?

í•´ë‹¹ ìš©ì˜ìì˜ ì„±ì”¨ë¥¼ ì…ë ¥í•˜ì‹œì˜¤. (ê¹€, ë°•, ìµœ, ì´)`,
        hint: 'ê¹€ëŒ€í‘œëŠ” ì§‘ì— ìˆê³ , ë°•ì°¨ì¥ì€ ì˜í™” ì¤‘, ì´ë¹„ì„œëŠ” ì‚¬ìš°ë‚˜ ì¤‘. ìµœë¶€ì¥ë§Œ í¸ì˜ì ì—ì„œ ì§‘ê¹Œì§€ ì´ë™í•˜ëŠ” ë™ì•ˆ ììœ ì‹œê°„ì´...',
        validate: i => i.trim() === 'ìµœ' },
      { type:'general', title:'ğŸ•µï¸ í¼ì¦ 2: ì¶”ì  ê¸°ë¡ ë¶„ì„',
        story: `ì¥í˜œë¦°ì˜ ì¶”ë¦¬ê°€ ë§ì•˜ë‹¤. ìµœë¶€ì¥ì˜ ì‹¤ì œ ë™ì„ . í¸ì˜ì ì´ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ê³³ì„ ê°”ë‹¤.`,
        question: `ìµœë¶€ì¥ì˜ ì´ ì´ë™ ì‹œê°„ì„ ê³„ì‚°í•˜ë¼.

<b>ê° êµ¬ê°„ë³„ ì´ë™ ì‹œê°„:</b>
- íšŒì‚¬ â†’ ì¹´í˜ A: 15ë¶„
- ì¹´í˜ A â†’ ì€í–‰: 25ë¶„
- ì€í–‰ â†’ ì§‘: 20ë¶„

ì´ ì´ë™ ì‹œê°„ì€?
15 + 25 + 20 = ?ë¶„`,
        hint: '15 + 25 + 20 = ?',
        validate: i => i.trim() === '60' },
      { type:'general', title:'ğŸ’° í¼ì¦ 3: ìƒì† ì¬ì‚°ì˜ ì•”í˜¸',
        story: `"ìµœë¶€ì¥ì€ ë¯¸ë¼ë‹¤. ì§„ì§œ ë¬¸ì œëŠ” ë”°ë¡œ ìˆë‹¤." ê¸ˆê³  ì•ˆ, æ•… í™©ê¸ˆë‚¨ íšŒì¥ì˜ ìœ ì–¸ì¥. ìƒì† ë¹„ìœ¨ì— ì•”í˜¸ê°€ ìˆ¨ì–´ìˆë‹¤.`,
        question: `ìƒì† ë¹„ìœ¨ì„ ê³„ì‚°í•˜ë¼.

<b>ì¬ì‚° ë¶„ë°°:</b>
- ì•„ë“¤: 1/2 = 3/6
- ë”¸: 1/3 = 2/6  
- ì†ì: 1/6 = 1/6
- ìì„ ë‹¨ì²´: ë‚˜ë¨¸ì§€

ë¶„ìˆ˜ì˜ í•©: 3/6 + 2/6 + 1/6 = ?/6

ìì„ ë‹¨ì²´ê°€ ë°›ì„ ëª«ì€ ì „ì²´ ì¤‘ ëª‡ ë¶„ì˜ ëª‡ì¸ê°€?
(ë¶„ìˆ˜ í˜•íƒœë¡œ ì…ë ¥. ì˜ˆ: 1/6)`,
        hint: '3/6 + 2/6 + 1/6 = 6/6 = 1. ì „ì²´ê°€ 1ì´ë¯€ë¡œ ìì„ ë‹¨ì²´ ëª«ì€ 0ì´ë‹¤. ì¦‰, 0/6 = 0',
        validate: i => i.trim() === '0' || i.trim() === '0/6' || i.includes('0') },
      { type:'general', title:'ğŸ“‹ í¼ì¦ 4: ì¡°ì‚¬ ë…¸íŠ¸ì˜ ì¦ê±°',
        story: `ìœ ì–¸ì¥ì€ ì™„ë²½í•˜ë‹¤. ê·¸ëŸ°ë° ê¸ˆê³  ë’¤ì— ë˜ ë‹¤ë¥¸ ì„œë¥˜. "ì§„ì§œ ë²”ì¸ì€ ë”°ë¡œ ìˆë‹¤." ê´€ë ¨ì ì ‘ì´‰ ê¸°ë¡.`,
        question: `ì¥í˜œë¦°ì˜ ì´ ì ‘ì´‰ íšŸìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ê° ê´€ë ¨ìë³„ ì ‘ì´‰ íšŸìˆ˜:</b>
- ê¹€ëŒ€í‘œ: 7íšŒ
- ë°•ì°¨ì¥: 12íšŒ
- ìµœë¶€ì¥: 5íšŒ  
- ì´ë¹„ì„œ: 9íšŒ
- ë³€í˜¸ì‚¬: 6íšŒ

ì´ ëª‡ íšŒ ì ‘ì´‰í–ˆëŠ”ê°€?
7 + 12 + 5 + 9 + 6 = ?`,
        hint: '7 + 12 + 5 + 9 + 6 = ?',
        validate: i => i.trim() === '39' },
      { type:'cpq', cpqIndex:0,
        story: `"ì§„ë²”ì„ ì°¾ì•˜ë‹¤. ê°ì‹œë‹¹í•˜ê³  ìˆë‹¤." ì¥í˜œë¦°ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ í–¥í•˜ë ¤ë˜ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `"ì±…ì¥ ë’¤ ë¹„ë°€ ê¸ˆê³ . ë§ˆì§€ë§‰ í¼ì¦ì´ ì§„ì‹¤ë¡œ ì´ëˆë‹¤." ì±…ì¥ì„ í™•ì¸í•˜ë¼.` }
    ]
  },
  {
    id: 'orphanage', emoji: 'ğŸšï¸', name: 'ë²„ë ¤ì§„ ê³ ì•„ì›ì˜ ì €ì£¼',
    desc: '30ë…„ ì „ ë¶ˆíƒ„ ê³ ì•„ì›. ë°¤ë§ˆë‹¤ ì•„ì´ë“¤ì˜ ìš¸ìŒì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤. ì†Œë¬¸ì´ ì•„ë‹ˆë‹¤.',
    difficulty: 3, time: '18ë¶„',
    intro: `êµ¬ì„¸ì£¼ ê³ ì•„ì›. 30ë…„ ì „ í™”ì¬ë¡œ íì‡„ëë‹¤. ë°¤ë§ˆë‹¤ ìš¸ìŒì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤. ì‹¬ë ¹ ì¡°ì‚¬ê´€ì¸ ë‹¹ì‹ ì´ ë“¤ì–´ì„°ê³ , í˜„ê´€ë¬¸ì´ ì €ì ˆë¡œ ë‹«í˜”ë‹¤. ì©ì€ ëƒ„ìƒˆ, ê³°íŒ¡ì´, ë³µë„ ëì—ì„œ ë“¤ë¦¬ëŠ” ì‘ì€ ë°œìêµ­. 30ë…„ ì „ ê·¸ë‚  ë°¤ì˜ ì§„ì‹¤ì„ ë°í˜€ë¼.`,
    puzzles: [
      { type:'general', title:'ğŸ‘¶ í¼ì¦ 1: ì•„ì´ë“¤ì˜ ì´ë¦„ ì•”í˜¸',
        story: `ì‚¬ë¬´ì‹¤, 30ë…„ê°„ ë°©ì¹˜. ì±…ìƒ ìœ„ 'ì¬ì›ìƒ ëª…ë‹¨'. í™”ì¬ ê·¸ë‚  ë°¤, ì´ ì•„ì´ë“¤ì´ ìˆì—ˆë‹¤.`,
        question: `ì•„ì´ë“¤ ì´ë¦„ì˜ ì²« ê¸€ìë¥¼ ë¶„ì„í•˜ë¼.

<b>ì´ë¦„ë“¤:</b> ê¹€ë¯¼ìˆ˜, ë°•ì˜í¬, ì´ì² í˜¸, ì •ìˆ˜ì§„, ìµœì˜ìˆ˜, ì¥ë¯¸ë‚˜, ì˜¤íƒœì‹, ìœ¤ì„œì—°, í™ê¸¸ë™, ê°•í˜œì§„

<b>ì²« ê¸€ìë“¤:</b> ê¹€, ë°•, ì´, ì •, ìµœ, ì¥, ì˜¤, ìœ¤, í™, ê°•

ì´ë¥¼ ê°€ë‚˜ë‹¤ ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´?
ê°•, ê¹€, ë°•, ì˜¤, ìœ¤, ì´, ì¥, ì •, ìµœ, í™

<b>ë‹¤ì„¯ ë²ˆì§¸ ê¸€ì</b>ëŠ”?`,
        hint: 'ê°€ë‚˜ë‹¤ ìˆœ: ã„±(ê°•), ã„±(ê¹€), ã„±(ë°•)... ì•„ë‹ˆë‹¤. ê°•(ã„±), ê¹€(ã„±), ì˜¤(ã…‡), ë°•(ã…‚), ìœ¤(ã…‡), ì´(ã…‡), ì¥(ã…ˆ), ì •(ã…ˆ), ìµœ(ã…Š), í™(ã…)',
        validate: i => i.trim() === 'ìœ¤' || i.trim() === 'ã…‡' },
      { type:'general', title:'ğŸ“– í¼ì¦ 2: ì›ì¥ ìˆ˜ë…€ì˜ ì¼ê¸° í•´ë…',
        story: `ì›ì¥ ìˆ˜ë…€ì˜ ì¼ê¸°. "ì•„ì´ë“¤ì´ ë°¤ë§ˆë‹¤ ì–´ë”˜ê°€ë¡œ ë‚˜ê°„ë‹¤. 'ê·¸ ì¥ì†Œ'ê°€ ë¬´ì—‡ì¸ì§€ í™•ì¸í•´ì•¼ í•œë‹¤." ì•„ì´ë“¤ì´ ê±¸ì–´ê°„ ê³³ì˜ ì£¼ì†Œê°€ ì í˜€ìˆë‹¤.`,
        question: `ì›ì¥ ìˆ˜ë…€ì˜ ì¼ê¸°ì—ì„œ ì¤‘ìš”í•œ ë‹¨ì„œë¥¼ ì°¾ì•„ë¼.

ì¼ê¸°ì—ëŠ” ì•„ì´ë“¤ì´ ë°¤ë§ˆë‹¤ ë¹ ì ¸ë‚˜ê°„ ë‚ ì§œê°€ ê¸°ë¡ë˜ì–´ ìˆë‹¤.

<b>ğŸ“… ì•„ì´ë“¤ì˜ ì™¸ì¶œ ê¸°ë¡:</b>
- 2ì›” 1ì¼ (ìˆ˜) - 3ëª…
- 2ì›” 5ì¼ (ì¼) - 3ëª…
- 2ì›” 9ì¼ (ëª©) - 3ëª…
- 2ì›” 13ì¼ (ì›”) - 3ëª…
- 2ì›” ?ì¼ - 3ëª…

ë‚ ì§œê°€ ì¼ì •í•œ ê°„ê²©ìœ¼ë¡œ ë°˜ë³µëœë‹¤. ë‹¤ìŒ ì™¸ì¶œ ì˜ˆì •ì¼ì€ 2ì›” ë©°ì¹ ì¸ê°€?`,
        hint: '1, 5, 9, 13... ê°„ê²©ì€ 4ì¼ì”©. 13 + 4 = ?',
        validate: i => i.trim() === '17' },
      { type:'general', title:'ğŸ§¸ í¼ì¦ 3: ë†€ì´ë°©ì˜ ì´ì§„ë²•',
        story: `2ì¸µ ë†€ì´ë°©. 30ë…„ ì „ ì•„ì´ë“¤ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ ë†€ì•˜ë˜ ê³³. ì¹ íŒì— ìˆ˜ë…€ê°€ ë‚¨ê¸´ ì´ì§„ë²• ì•”í˜¸.`,
        question: `ì¹ íŒì˜ ì´ì§„ë²•ì„ í•´ë…í•˜ë¼.

<b>ğŸŒŸ âš« ğŸŒŸ âš« ğŸŒŸ âš« âš« ğŸŒŸ</b>
= 1 0 1 0 1 0 0 1

8ìë¦¬ ì´ì§„ë²• 10101001ì„ ì‹­ì§„ë²•ìœ¼ë¡œ ë³€í™˜í•˜ë©´?

ê³„ì‚°: 1Ã—128 + 0Ã—64 + 1Ã—32 + 0Ã—16 + 1Ã—8 + 0Ã—4 + 0Ã—2 + 1Ã—1 = ?`,
        hint: '128 + 32 + 8 + 1 = ?',
        validate: i => i.trim() === '169' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ì§€í•˜ì‹¤ì˜ ë§ˆì§€ë§‰ ì§„ì‹¤',
        story: `ì§€í•˜ì‹¤. ì–‘ì´ˆê°€ íƒ€ê³  ìˆë‹¤. ë²½ì— ìƒˆê²¨ì§„ ê¸€: "ì¹¨ë¬µí•˜ëŠ” ìëŠ” ë” í° ì£„ë¥¼ ì§“ëŠ”ë‹¤."`,
        question: `30ë…„ ì „ í™”ì¬ì—ì„œ í˜„ì¬ê¹Œì§€ì˜ ì •í™•í•œ ì‹œê°„ì„ ê³„ì‚°í•˜ë¼.

<b>í™”ì¬ ë°œìƒ:</b> 1994ë…„ 2ì›” 15ì¼ ì˜¤í›„ 11ì‹œ 30ë¶„
<b>í˜„ì¬:</b> 2024ë…„ 2ì›” 15ì¼ ì˜¤í›„ 11ì‹œ 30ë¶„

2024 - 1994 = ëª‡ ë…„?

ì •í™•íˆ ì§€ë‚œ ì—°ìˆ˜ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '2024 - 1994 = ?',
        validate: i => i.trim() === '30' },
      { type:'cpq', cpqIndex:0,
        story: `ì´ì‚¬ì¥ì˜ ê³ ë°±. "ê³ ì•„ì›ì„ íŒ”ê¸° ìœ„í•´ ë¶ˆì„ ì§ˆë €ë‹¤." ì•„ì´ë“¤ì€ ì´ê±¸ ì•Œì•„ë²„ë ¸ë‹¤. ì¦ê±°ê°€ ìˆ¨ê²¨ì§„ ì¥ì†Œ. ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `"ì•„ì´ë“¤ì´ ì§„ì‹¤ì„ í­ë¡œí•˜ë ¤ í–ˆì§€ë§Œ... ë‚˜ëŠ” ê·¸ë“¤ì„ ë§‰ê¸° ìœ„í•´..." ì§€í•˜ì‹¤ì„ í™•ì¸í•˜ë¼.` }
    ]
  },
  {
    id: 'subway', emoji: 'ğŸš‡', name: 'ì§€í•˜ì²  ë§ˆì§€ë§‰ ì—´ì°¨ì˜ ê³µí¬',
    desc: 'ìƒˆë²½ 1ì‹œ 30ë¶„, ë§ˆì§€ë§‰ ì—´ì°¨. ìŠ¹ê°ë“¤ì´ í•œ ëª…ì”© ì‚¬ë¼ì§„ë‹¤. ë‚´ë¦¬ì§€ ì•Šì•˜ëŠ”ë°.',
    difficulty: 2, time: '16ë¶„',
    intro: `ìƒˆë²½ 1ì‹œ 30ë¶„, 2í˜¸ì„  ë§‰ì°¨. ìŠ¹ê°ì´ í•œ ëª…ì”© ì‚¬ë¼ì§„ë‹¤. ë‚´ë¦° ê²Œ ì•„ë‹ˆë‹¤. ê·¸ëƒ¥ ì—†ì–´ì§„ë‹¤. í„°ë„ì—ì„œ ì—´ì°¨ê°€ ë©ˆì·„ë‹¤. ë¬¸ì´ ì ê¸°ê³ , ì¡°ëª…ì´ ê¹œë¹¡ì´ê³ , ì•ˆë‚´ë°©ì†¡ì´ ëŠê²¼ë‹¤. ì´ ì—´ì°¨ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ê°€.`,
    puzzles: [
      { type:'general', title:'ğŸ—ºï¸ í¼ì¦ 1: ì§€í•˜ì²  ë…¸ì„ ë„ì˜ ì•”í˜¸',
        story: `ì •ì . ë…¸ì„ ë„ì— ëˆ„êµ°ê°€ ë¹¨ê°„ íœìœ¼ë¡œ í‘œì‹œí•´ë’€ë‹¤. íŠ¹ì • ì—­ë“¤ì´ ì—°ê²°ëœë‹¤.`,
        question: `ì§€í•˜ì²  ë…¸ì„ ë„ë¥¼ ë¶„ì„í•˜ë¼.

í‘œì‹œëœ ì—­ë“¤ì˜ í™˜ìŠ¹ ì •ë³´:
- í™ëŒ€ì…êµ¬: 2í˜¸ì„  â†” 6í˜¸ì„  (í™˜ìŠ¹ ê°€ëŠ¥)
- ì‹ ì´Œ: 2í˜¸ì„ ë§Œ
- ì´ëŒ€: 2í˜¸ì„ ë§Œ  
- ì¶©ì •ë¡œ: 2í˜¸ì„  â†” 5í˜¸ì„  (í™˜ìŠ¹ ê°€ëŠ¥)

<b>2í˜¸ì„ ì—ì„œ ë‹¤ë¥¸ ë…¸ì„ ìœ¼ë¡œ í™˜ìŠ¹ ê°€ëŠ¥í•œ ì—­ì€ ëª‡ ê°œì¸ê°€?</b>

í™˜ìŠ¹ì—­ ê°œìˆ˜ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'í™ëŒ€ì…êµ¬(2â†”6), ì¶©ì •ë¡œ(2â†”5). ì‹ ì´Œê³¼ ì´ëŒ€ëŠ” 2í˜¸ì„ ë§Œ.',
        validate: i => i.trim() === '2' },
      { type:'general', title:'ğŸ“‹ í¼ì¦ 2: ê¸°ê´€ì‚¬ì˜ ìŠ¹ê° ê¸°ë¡ ë¶„ì„',
        story: `ê¸°ê´€ì‚¬ì˜ ë¹„ìƒ ì¼ì§€. "ìŠ¹ê°ë“¤ì´ ê°™ì€ ì¥ì†Œë¥¼ ê³„ì† ë§í•œë‹¤." ì‚¬ë¼ì§„ ì‚¬ëŒë“¤ê³¼ ê·¸ ì¥ì†Œì˜ ì—°ê²°ê³ ë¦¬ëŠ”?`,
        question: `ê¸°ê´€ì‚¬ì˜ ë¹„ìƒ ì¼ì§€ì—ì„œ ì‚¬ë¼ì§„ ìŠ¹ê° íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>ğŸš‡ ìŠ¹ê° ì‹¤ì¢… ê¸°ë¡:</b>
- 1í˜¸ì°¨: íƒ‘ìŠ¹ 8ëª…, ì‹¤ì¢… 2ëª…
- 2í˜¸ì°¨: íƒ‘ìŠ¹ 6ëª…, ì‹¤ì¢… 3ëª…
- 3í˜¸ì°¨: íƒ‘ìŠ¹ 10ëª…, ì‹¤ì¢… 5ëª…
- 4í˜¸ì°¨: íƒ‘ìŠ¹ 4ëª…, ì‹¤ì¢… 2ëª…

<b>ì „ì²´ ì—´ì°¨ì—ì„œ ì‹¤ì¢…ëœ ìŠ¹ê°ì€ ì´ ëª‡ ëª…ì¸ê°€?</b>`,
        hint: '2 + 3 + 5 + 2 = ?',
        validate: i => i.trim() === '12' },
      { type:'general', title:'â° í¼ì¦ 3: ì‹œê°„í‘œì˜ ë¹„ë°€',
        story: `ìš´ì „ì„. ì„œë ì•ˆì— 'ë¹„ë°€ ì‹œê°„í‘œ'. ì¼ë°˜ ì‹œê°„í‘œê°€ ì•„ë‹ˆë‹¤.`,
        question: `ì§€í•˜ì²  ìš´í–‰ ì‹œê°„ì„ ê³„ì‚°í•˜ë¼.

<b>ì¶œë°œ:</b> 23:45 (23ì‹œ 45ë¶„)
<b>ë„ì°©:</b> 01:15 (1ì‹œ 15ë¶„, ë‹¤ìŒë‚ )

23:45 â†’ 00:00 â†’ 01:15

23:45ì—ì„œ 01:15ê¹Œì§€ ì´ ëª‡ ë¶„ì¸ê°€?

(íŒíŠ¸: 23:45 â†’ 00:00ì€ 15ë¶„, 00:00 â†’ 01:15ëŠ” 75ë¶„)`,
        hint: '23:45 â†’ 24:00(00:00) = 15ë¶„, 00:00 â†’ 01:15 = 75ë¶„. ì´ 15 + 75 = ?',
        validate: i => i.trim() === '90' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ë§ˆì§€ë§‰ ì—­ìœ¼ë¡œì˜ íƒˆì¶œ',
        story: `ë¹„ìƒë²¨ ì˜†, ìˆ¨ê²¨ì§„ íŒ¨ë„. íƒˆì¶œ ì‹œìŠ¤í…œì´ë‹¤. ë§ˆì§€ë§‰ ë…¼ë¦¬ í¼ì¦.`,
        question: `ìŠ¹ê°ë“¤ì˜ ì¦ì–¸ì„ ë¶„ì„í•˜ë¼.

- A: "Bê°€ ê±°ì§“ë§"
- B: "ìš°ë¦¬ ì¤‘ í•œ ëª…ë§Œ ì§„ì‹¤"
- C: "Aì˜ ë§ì´ ë§ë‹¤"  
- D: "Bì˜ ë§ì´ í‹€ë ¸ë‹¤"

Bì˜ ë§ì´ ì°¸ì´ë¼ë©´ (í•œ ëª…ë§Œ ì§„ì‹¤), A,C,DëŠ” ëª¨ë‘ ê±°ì§“ë§ìŸì´ì—¬ì•¼ í•œë‹¤.
ê·¸ëŸ°ë° AëŠ” "Bê°€ ê±°ì§“ë§"ì´ë¼ê³  í–ˆìœ¼ë‹ˆ Aê°€ ê±°ì§“ë§ìŸì´ë©´ BëŠ” ì§„ì‹¤í•´ì•¼...

Bì˜ ë§ì´ ê±°ì§“ì´ë¼ë©´, Bë¥¼ ì œì™¸í•˜ê³  ëˆ„ê°€ ì§„ì‹¤ì„ ë§í•˜ëŠ”ê°€?

<b>ì§„ì‹¤ì„ ë§í•˜ëŠ” ìŠ¹ê°ì€ ì´ ëª‡ ëª…ì¸ê°€?</b>`,
        hint: 'Bê°€ ê±°ì§“ë§ì´ë¼ê³  ê°€ì •í•˜ì. ê·¸ëŸ¬ë©´ A("Bê°€ ê±°ì§“ë§")=ì°¸, C("Aê°€ ë§ë‹¤")=ì°¸, D("Bê°€ í‹€ë ¸ë‹¤")=ì°¸. Bë§Œ ê±°ì§“ë§í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ì§„ì‹¤.',
        validate: i => i.trim() === '3' },
      { type:'cpq', cpqIndex:0,
        story: `"ìŠ¹ê°ë“¤ì´ ëª¨ë‘ ê·¸ ì¥ì†Œì™€ ì—°ê²°ë˜ì–´ ìˆë‹¤." ê¸°ê´€ì‚¬ì˜ ìµœì¢… ë³´ê³ ì„œ. ê²°ì •ì  ì¥ì†Œì˜ ê±°ë¦¬ë¥¼ ì¸¡ì •í•˜ë¼.`,
        storyAfter: `"ì´ ì—´ì°¨ì˜ ì§„ì§œ ëª©ì ì§€ë¥¼ ì•Œì•˜ë‹¤." ë¹„ìƒ íƒˆì¶œ ì½”ë“œëŠ” ë¹„ìƒë²¨ ì˜†ì— ìˆë‹¤.` }
    ]
  },
  {
    id: 'museum', emoji: 'ğŸ›ï¸', name: 'ë°•ë¬¼ê´€ì˜ ì €ì£¼',
    desc: 'ì•¼ê°„ ê²½ë¹„ì›ì´ ì´ì§‘íŠ¸ê´€ì—ì„œ ì‚¬ë¼ì¡Œë‹¤. CCTVëŠ” ê·¸ ìˆœê°„ êº¼ì¡Œë‹¤.',
    difficulty: 2, time: '15ë¶„',
    intro: `êµ­ë¦½ ê³ ê³ í•™ ë°•ë¬¼ê´€. ì•¼ê°„ ê²½ë¹„ì› ê¹€íƒœí˜„, 3ì¼ì§¸ í–‰ë°©ë¶ˆëª…. ë§ˆì§€ë§‰ CCTVëŠ” ì´ì§‘íŠ¸ê´€ì—ì„œ ëŠê¸´ë‹¤. ê´€ë¦¬ì†Œì¥ì¸ ë‹¹ì‹ ì´ ì•¼ê°„ì— ë“¤ì–´ì™”ì§€ë§Œ, ëª¨ë“  ë¬¸ì´ ì ê²¼ë‹¤. ìœ ë¬¼ë“¤ì´ ì–´ë‘  ì†ì—ì„œ ë¹›ë‚˜ê³ , ë³µë„ ëì—ì„œ ì†ì‚­ì„ì´ ë“¤ë¦°ë‹¤.`,
    puzzles: [
      { type:'general', title:'ğŸº í¼ì¦ 1: ê³ ëŒ€ ìœ ë¬¼ì˜ ì—°ë„ ì•”í˜¸',
        story: `ì´ì§‘íŠ¸ê´€. ìœ ë¬¼ 4ì  ì•ì— ê¹€ ê²½ë¹„ì›ì´ ë‚¨ê¸´ ë©”ëª¨ê°€ ë¶™ì–´ìˆë‹¤.`,
        question: `ìœ ë¬¼ ì—°ë„ì˜ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>ìœ ë¬¼ë³„ ì œì‘ ì—°ë„:</b>
- íˆ¬íƒ•ì¹´ë©˜ ë§ˆìŠ¤í¬: ê¸°ì›ì „ 1323ë…„ â†’ ë§ˆì§€ë§‰ ìë¦¬: 3
- ì¹´ë…¸í‘¸ìŠ¤ í•­ì•„ë¦¬: ê¸°ì›ì „ 1550ë…„ â†’ ë§ˆì§€ë§‰ ìë¦¬: 0
- ë¡œì œíƒ€ ìŠ¤í†¤: ê¸°ì›ì „ 196ë…„ â†’ ë§ˆì§€ë§‰ ìë¦¬: 6  
- í´ë ˆì˜¤íŒŒíŠ¸ë¼ ëª©ê±¸ì´: ê¸°ì›ì „ 69ë…„ â†’ ë§ˆì§€ë§‰ ìë¦¬: 9

ë„¤ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì´ì–´ì„œ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '1323ì˜ ë§ˆì§€ë§‰ ìˆ«ìëŠ” 3, 1550ì€ 0, 196ì€ 6, 69ëŠ” 9',
        validate: i => i.replace(/\s/g,'') === '3069' },
      { type:'general', title:'ğŸ““ í¼ì¦ 2: ê²½ë¹„ì›ì˜ ìˆœì°° ê¸°ë¡ ë¶„ì„',
        story: `ìˆœì°° ì¼ì§€. "ìœ ë¬¼ì´ ì œìë¦¬ì— ì—†ë‹¤. ëˆ„êµ°ê°€ ëª°ë˜ ë“¤ì–´ì˜¨ë‹¤." ë§ˆì§€ë§‰ ê¸°ë¡: "ì˜¤ëŠ˜ ë°¤ ë”°ë¼ê°€ ë³¸ë‹¤." ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì¥ì†Œì˜ ì£¼ì†Œ.`,
        question: `ê¹€ ê²½ë¹„ì›ì˜ ìˆœì°° ì¼ì§€ì—ì„œ ì´ìƒí•œ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>ğŸ”¦ ì•¼ê°„ ìˆœì°° ê¸°ë¡ (ìœ ë¬¼ ì´ë™ ê°ì§€):</b>
- ì´ì§‘íŠ¸ê´€: 3ê±´
- ê·¸ë¦¬ìŠ¤ê´€: 5ê±´
- ë¡œë§ˆê´€: 7ê±´
- ë™ì–‘ê´€: 9ê±´
- ì¤‘ì„¸ê´€: ?ê±´

ì´ë™ ê°ì§€ ê±´ìˆ˜ê°€ ì¼ì •í•œ íŒ¨í„´ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆë‹¤. ì¤‘ì„¸ê´€ì˜ ì˜ˆìƒ ê±´ìˆ˜ëŠ”?`,
        hint: '3, 5, 7, 9... 2ì”© ì¦ê°€. ë‹¤ìŒì€?',
        validate: i => i.trim() === '11' },
      { type:'general', title:'ğŸ›ï¸ í¼ì¦ 3: ê·¸ë¦¬ìŠ¤ ì‹ í™”ì˜ ìŒì•… ì•”í˜¸',
        story: `ê·¸ë¦¬ìŠ¤ê´€. ì•„í´ë¡œ ì¡°ê°ìƒ ëŒ€ì¢Œì— ìŒí‘œê°€ ê·¸ë ¤ì ¸ ìˆë‹¤. ê¹€ ê²½ë¹„ì›ì˜ ë‹¨ì„œ.`,
        question: `ê·¸ë¦¬ìŠ¤ ìŒì•… ì•”í˜¸ë¥¼ í•´ë…í•˜ë¼.

<b>ìŒê³„ ëŒ€ì‘í‘œ:</b>
ë„(1), ë ˆ(2), ë¯¸(3), íŒŒ(4), ì†”(5), ë¼(6), ì‹œ(7), ë„(8)

<b>ì•…ë³´ì˜ ë©œë¡œë””:</b> ì†” ë„ ë ˆ ë¯¸

ê° ìŒì„ ìˆ«ìë¡œ ë³€í™˜í•˜ë©´?
ì†”(5) ë„(1) ë ˆ(2) ë¯¸(3)

ë„¤ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'ì†”=5, ë„=1, ë ˆ=2, ë¯¸=3',
        validate: i => i.replace(/\s/g,'') === '5123' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ë¡œë§ˆ í™©ì œì˜ ì‹œê°„',
        story: `ë¡œë§ˆê´€. ê±°ëŒ€í•œ í•´ì‹œê³„ ì£¼ë³€ì— 4ëª…ì˜ í™©ì œ. ê¹€ ê²½ë¹„ì›ì˜ ë§ˆì§€ë§‰ í¼ì¦ì´ ìƒˆê²¨ì ¸ ìˆë‹¤.`,
        question: `ë¡œë§ˆ í™©ì œë“¤ì˜ ì¬ìœ„ ê¸°ê°„ì„ ë¹„êµí•˜ë¼.

<b>ê° í™©ì œì˜ ì¬ìœ„ ê¸°ê°„:</b>
- ì•„ìš°êµ¬ìŠ¤íˆ¬ìŠ¤: 45ë…„
- íŠ¸ë¼ì•¼ëˆ„ìŠ¤: 19ë…„
- í•˜ë“œë¦¬ì•„ëˆ„ìŠ¤: 21ë…„  
- ë§ˆë¥´ì¿ ìŠ¤: 19ë…„

<b>ê°€ì¥ ì˜¤ë˜ í†µì¹˜í•œ í™©ì œì˜ ì¬ìœ„ ê¸°ê°„</b>ì€ ëª‡ ë…„ì¸ê°€?`,
        hint: '45ë…„, 19ë…„, 21ë…„, 19ë…„ ì¤‘ì—ì„œ ê°€ì¥ í° ìˆ˜ëŠ”?',
        validate: i => i.trim() === '45' },
      { type:'cpq', cpqIndex:0,
        story: `ë¹„ë°€ ìˆ˜ì¥ê³ . "ë‚´ë¶€ìê°€ ìœ ë¬¼ì„ ë¹¼ëŒë¦¬ê³  ìˆë‹¤." ë°€ë§¤ ê±°ë˜ ì¥ì†Œê°€ ì í˜€ìˆë‹¤. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `"ì§„ë²”ì„ ì°¾ì•˜ë‹¤. ë‚˜ë¥¼ ì˜ì‹¬í•˜ê³  ìˆë‹¤. ë¡œë§ˆê´€ ì‹œê³„ë¥¼ í™•ì¸í•˜ë¼." ë¡œë§ˆê´€ìœ¼ë¡œ.` }
    ]
  },
  {
    id: 'opera', emoji: 'ğŸ­', name: 'ì˜¤í˜ë¼ ê·¹ì¥ì˜ ìœ ë ¹',
    desc: 'í”„ë¦¬ë§ˆëˆë‚˜ê°€ 1ì²œ ê´€ê° ì•ì—ì„œ ì—°ê¸°ì²˜ëŸ¼ ì‚¬ë¼ì¡Œë‹¤. 100ë…„ ëœ ê·¹ì¥ì˜ ì €ì£¼ì¸ê°€.',
    difficulty: 3, time: '17ë¶„',
    intro: `ê·¸ë€ë° ì˜¤í˜ë¼ í•˜ìš°ìŠ¤, 100ë…„ ì—­ì‚¬. í”„ë¦¬ë§ˆëˆë‚˜ ì´ì†Œí”„ë¼ë…¸, <ë¼ íŠ¸ë¼ë¹„ì•„íƒ€> 2ë§‰ ë„ì¤‘ ë¬´ëŒ€ì—ì„œ ì‚¬ë¼ì¡Œë‹¤. 1ì²œ ê´€ê°ì´ ë³´ëŠ” ì•ì—ì„œ. í”„ë¡œë“€ì„œì¸ ë‹¹ì‹ ì´ ë¬´ëŒ€ ë’¤ì— ì™”ì§€ë§Œ, ê¸°ê³„ì¥ì¹˜ê°€ ì‘ë™í•˜ë©° ì¶œì…êµ¬ê°€ ë´‰ì‡„ëë‹¤. ì˜¤ë¥´ê³¨ì´ ìš¸ë¦¬ê³ , ë¹ˆ ê°ì„ì—ì„œ ë°•ìˆ˜ ì†Œë¦¬ê°€ ë©”ì•„ë¦¬ì¹œë‹¤.`,
    puzzles: [
      { type:'general', title:'ğŸ¼ í¼ì¦ 1: ì•…ë³´ì˜ ìˆ«ì ì•”í˜¸',
        story: `ë¶„ì¥ì‹¤. í™”ì¥ëŒ€ ìœ„ ì•…ë³´, "Addio del passato." ë¹¨ê°„ íœìœ¼ë¡œ ìŒí‘œì— ë™ê·¸ë¼ë¯¸.`,
        question: `ìŒí‘œë¥¼ ì•ŒíŒŒë²³ ìˆœì„œ ë²ˆí˜¸ë¡œ ë³€í™˜í•˜ë¼.

<b>ì•ŒíŒŒë²³ ìˆœì„œ:</b> A=1, B=2, C=3, D=4, E=5, F=6, G=7...

<b>í‘œì‹œëœ ìŒí‘œë“¤:</b>
- ë„(C) = 3ë²ˆì§¸ ì•ŒíŒŒë²³ = 3
- ë ˆ(D) = 4ë²ˆì§¸ ì•ŒíŒŒë²³ = 4  
- ë¯¸(E) = 5ë²ˆì§¸ ì•ŒíŒŒë²³ = 5
- ë„(C) = 3ë²ˆì§¸ ì•ŒíŒŒë²³ = 3
- ì†”(G) = 7ë²ˆì§¸ ì•ŒíŒŒë²³ = 7

ë‹¤ì„¯ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'C=3, D=4, E=5, C=3, G=7',
        validate: i => i.replace(/\s/g,'') === '34537' },
      { type:'general', title:'ğŸ“” í¼ì¦ 2: ì´ì†Œí”„ë¼ë…¸ì˜ ì¼ê¸° í•´ë…',
        story: `ì´ì†Œí”„ë¼ë…¸ì˜ ì¼ê¸°. "ëˆ„êµ°ê°€ ë‚˜ë¥¼ ì§€ì¼œë³´ê³  ìˆë‹¤. ì—°ìŠµì‹¤ì—ì„œ, ë¬´ëŒ€ì—ì„œ, ì§‘ì—ì„œë„." ìœ„í˜‘ í¸ì§€ì˜ ê¸°ë¡ì´ ìˆë‹¤.`,
        question: `ì´ì†Œí”„ë¼ë…¸ì˜ ì¼ê¸°ì— ì íŒ ì•”í˜¸ë¥¼ í•´ë…í•˜ë¼.

ê·¸ë…€ëŠ” ìœ„í˜‘ í¸ì§€ë¥¼ ë°›ì€ ë‚ ì§œë¥¼ ë¡œë§ˆ ìˆ«ìë¡œ ê¸°ë¡í–ˆë‹¤.

<b>ğŸ­ ìœ„í˜‘ í¸ì§€ ìˆ˜ì‹  ë‚ ì§œ:</b>
- Ië²ˆì§¸ í¸ì§€: IIIì›” (3ì›”)
- IIë²ˆì§¸ í¸ì§€: VIIì›” (7ì›”)
- IIIë²ˆì§¸ í¸ì§€: IXì›” (9ì›”)
- IVë²ˆì§¸ í¸ì§€: XIIì›” (12ì›”)

<b>ë„¤ í¸ì§€ì˜ ì›” ìˆ«ìë¥¼ ëª¨ë‘ ë”í•˜ë©´?</b>
3 + 7 + 9 + 12 = ?`,
        hint: '3 + 7 + 9 + 12 = ?',
        validate: i => i.trim() === '31' },
      { type:'general', title:'ğŸ» í¼ì¦ 3: ì˜¤ì¼€ìŠ¤íŠ¸ë¼ì˜ ìˆ˜í•™ì  í•˜ëª¨ë‹ˆ',
        story: `ì§€í•˜ ì•…ê¸° ë³´ê´€ì†Œ. ì•…ê¸°ë“¤ì´ ìˆ˜í•™ì  íŒ¨í„´ìœ¼ë¡œ ë°°ì—´ë˜ì–´ ìˆë‹¤.`,
        question: `ì•…ê¸° ë°°ì¹˜ì˜ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>ê° ì—´ë³„ ì•…ê¸° ìˆ˜:</b>
- 1ì—´: 8ëŒ€
- 2ì—´: 6ëŒ€ (8-2)
- 3ì—´: 4ëŒ€ (6-2)  
- 4ì—´: 2ëŒ€ (4-2)
- 5ì—´: ? (2-2)

íŒ¨í„´: ë§¤ë²ˆ 2ì”© ê°ì†Œ

<b>5ì—´ì—ëŠ” ëª‡ ëŒ€ì˜ ì•…ê¸°ê°€ ìˆì–´ì•¼ í•˜ëŠ”ê°€?</b>`,
        hint: '8 â†’ 6 â†’ 4 â†’ 2 â†’ ?',
        validate: i => i.trim() === '0' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ë¬´ëŒ€ ê¸°ê³„ì‹¤ì˜ ë§ˆì§€ë§‰ ë¹„ë°€',
        story: `ê¸°ê³„ì‹¤, ê·¹ì¥ì˜ ì‹¬ì¥ë¶€. 100ë…„ ëœ ì¥ì¹˜ë“¤ ì‚¬ì´ì— ë§ˆì§€ë§‰ í¼ì¦.`,
        question: `ê·¹ì¥ì˜ ì—­ì‚¬ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ì˜¤í˜ë¼ í•˜ìš°ìŠ¤ ê±´ë¦½:</b> 1924ë…„
<b>í˜„ì¬:</b> 2024ë…„

ê·¹ì¥ì´ ê±´ë¦½ëœ ì§€ ëª‡ ë…„ì´ ì§€ë‚¬ëŠ”ê°€?

2024 - 1924 = ?

ê³„ì‚°í•œ ì—°ìˆ˜ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '2024 - 1924 = ?',
        validate: i => i.trim() === '100' },
      { type:'cpq', cpqIndex:0,
        story: `ë¹„ë°€ ê¸°ë¡ë³´ê´€ì†Œ. ì´ì†Œí”„ë¼ë…¸ì˜ ë§ˆì§€ë§‰ ë³´ê³ ì„œ. "ìœ ë ¹ì˜ ì •ì²´ë¥¼ ì•Œì•„ëƒˆë‹¤. ê·¸ë“¤ì´ ë§‰ìœ¼ë ¤ í•œë‹¤." ì¦ê±°ê°€ ìˆ¨ê²¨ì§„ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ í™•ì¸í•˜ë¼.`,
        storyAfter: `"ìœ ë ¹ì€ ì¡´ì¬í•œë‹¤. í•˜ì§€ë§Œ ì´ˆìì—°ì  ì¡´ì¬ê°€ ì•„ë‹ˆë‹¤." ë¬´ëŒ€ ì•„ë˜ ê¸°ê³„ì‹¤ë¡œ.` }
    ]
  },
  {
    id: 'clocktower', emoji: 'â›ª', name: 'ì‹œê³„íƒ‘ì˜ ë¹„ë°€',
    desc: 'ì‹œê³„ê°€ 3ì‹œ 33ë¶„ì— ë©ˆì·„ë‹¤. 50ë…„ê°„ í•œ ë²ˆë„ ë©ˆì¶˜ ì  ì—†ë˜ ì‹œê³„ê°€. ì¢…ì§€ê¸°ëŠ” ì‚¬ë¼ì¡Œë‹¤.',
    difficulty: 2, time: '14ë¶„',
    intro: `ê³ ë”• ì‹œê³„íƒ‘. 50ë…„ê°„ í•œ ë²ˆë„ ë©ˆì¶”ì§€ ì•Šì•˜ë‹¤. ì§€ê¸ˆì€ 3ì‹œ 33ë¶„ì— ë©ˆì¶°ìˆë‹¤. ì¢…ì§€ê¸° ë°•ì‹œê³„ê°€ ì‚¬ë¼ì¡Œë‹¤. ê´€ë¦¬ì‚¬ì¸ ë‹¹ì‹ ì´ ì˜¬ë¼ì™”ì§€ë§Œ, ê³„ë‹¨ì´ ë¬´ë„ˆì§€ë©° ê°‡í˜”ë‹¤. ê¸°ì–´ ëŒì•„ê°€ëŠ” ì†Œë¦¬ ì‚¬ì´ë¡œ ì•”í˜¸ê°€ ìƒˆê²¨ì ¸ ìˆë‹¤.`,
    puzzles: [
      { type:'general', title:'â° í¼ì¦ 1: ì‹œê³„ë°”ëŠ˜ì˜ ê°ë„ ê³„ì‚°',
        story: `ê±°ëŒ€í•œ ì‹œê³„ ê¸°ê³„ì¥ì¹˜. 3ì‹œ 33ë¶„ì— ë©ˆì¶°ìˆë‹¤. ë°•ì‹œê³„ì˜ ë©”ëª¨.`,
        question: `3ì‹œ 33ë¶„ì—ì„œ ì‹œì¹¨ê³¼ ë¶„ì¹¨ ì‚¬ì´ì˜ ê°ë„ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ë¶„ì¹¨ ìœ„ì¹˜:</b> 33ë¶„ â†’ 33 Ã— 6ë„ = 198ë„
<b>ì‹œì¹¨ ìœ„ì¹˜:</b> 3ì‹œ 33ë¶„ â†’ 3 Ã— 30ë„ + (33 Ã— 0.5ë„) = 90ë„ + 16.5ë„ = 106.5ë„

<b>ë‘ ë°”ëŠ˜ ì‚¬ì´ ê°ë„:</b> |198ë„ - 106.5ë„| = 91.5ë„

ì‹œì¹¨ê³¼ ë¶„ì¹¨ ì‚¬ì´ì˜ ê°ë„ëŠ”? (ì†Œìˆ˜ì  ì²«ì§¸ ìë¦¬ê¹Œì§€)`,
        hint: 'ë¶„ì¹¨ì€ 198ë„ ìœ„ì¹˜, ì‹œì¹¨ì€ 106.5ë„ ìœ„ì¹˜. ë‘ ê°ë„ì˜ ì°¨ì´ëŠ” 91.5ë„',
        validate: i => i.trim() === '91.5' || i.trim() === '91' },
      { type:'general', title:'ğŸ“’ í¼ì¦ 2: ì¢…ì§€ê¸°ì˜ ì‘ì—… ì¼ì§€ ë¶„ì„',
        story: `ì‘ì—… ì¼ì§€. "ì‹œê³„ê°€ ìê¾¸ ëŠë ¤ì§„ë‹¤. ëˆ„êµ°ê°€ ì¡°ì‘í•˜ê³  ìˆë‹¤." ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì¥ì†Œê°€ ì í˜€ìˆë‹¤.`,
        question: `ë°•ì‹œê³„ì˜ ì‘ì—… ì¼ì§€ì—ì„œ ì‹œê³„ ì˜¤ì°¨ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>â° ì‹œê³„ ì˜¤ì°¨ ê¸°ë¡ (ì¼ë³„):</b>
- ì›”ìš”ì¼: 2ë¶„ ëŠë¦¼
- í™”ìš”ì¼: 4ë¶„ ëŠë¦¼
- ìˆ˜ìš”ì¼: 8ë¶„ ëŠë¦¼
- ëª©ìš”ì¼: 16ë¶„ ëŠë¦¼
- ê¸ˆìš”ì¼: ?ë¶„ ëŠë¦¼

ì˜¤ì°¨ê°€ ë§¤ì¼ 2ë°°ì”© ì¦ê°€í•˜ê³  ìˆë‹¤. ê¸ˆìš”ì¼ì˜ ì˜¤ì°¨ëŠ” ëª‡ ë¶„ì¸ê°€?`,
        hint: '2, 4, 8, 16... ë§¤ì¼ 2ë°°. 16 Ã— 2 = ?',
        validate: i => i.trim() === '32' },
      { type:'general', title:'ğŸ”” í¼ì¦ 3: ì¢…ì˜ ì§„ë™ ì£¼íŒŒìˆ˜',
        story: `ì¢…ë£¨. 50ë…„ê°„ ìš¸ë ¤ì˜¨ ì²­ë™ ì¢…ì´ ì¹¨ë¬µí•˜ê³  ìˆë‹¤. ë°•ì‹œê³„ê°€ ë‚¨ê¸´ ê³„ì‚° ê³µì‹.`,
        question: `ì¢…ì˜ ì§„ë™ ì£¼íŒŒìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ê³µì‹:</b> f = ë¬´ê²Œ Ã· ì§ê²½Â²

<b>ì£¼ì–´ì§„ ê°’:</b>
- ë¬´ê²Œ: 1,500kg
- ì§ê²½: 2ë¯¸í„°

f = 1,500 Ã· (2)Â²
f = 1,500 Ã· 4
f = ?

ê³„ì‚° ê²°ê³¼ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '1,500 Ã· 4 = ?',
        validate: i => i.trim() === '375' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ì‹œê°„ì˜ ë§ˆì§€ë§‰ ë¹„ë°€',
        story: `ê¸°ê³„ ë‚´ë¶€. 50ë…„ê°„ ê´€ë¦¬ëœ ì •ë°€í•œ ê¸°ì–´ì™€ íƒœì—½. ê±´ì„¤ìê°€ ë‚¨ê¸´ ìµœì¢… ì‹œí—˜.`,
        question: `ì‹œê³„íƒ‘ì˜ ì •í™•í•œ ì—°ìˆ˜ë¥¼ ê³„ì‚°í•˜ë¼.

<b>ê±´ì„¤ ì¼ì‹œ:</b> 1974ë…„ 6ì›” 15ì¼ ì˜¤í›„ 3ì‹œ 33ë¶„
<b>í˜„ì¬ ì¼ì‹œ:</b> 2024ë…„ 6ì›” 15ì¼ ì˜¤í›„ 3ì‹œ 33ë¶„

ë‘ ì‹œì  ì‚¬ì´ì— ì§€ë‚œ ì •í™•í•œ ì—°ìˆ˜ëŠ”?

2024 - 1974 = ?

ê³„ì‚°í•œ ì—°ìˆ˜ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '2024 - 1974 = ?',
        validate: i => i.trim() === '50' },
      { type:'cpq', cpqIndex:0,
        story: `ìˆ¨ê²¨ì§„ ê³„ë‹¨. ë¹„ë°€ ë°©. "ì´ ì‹œê³„íƒ‘ì€ ë‹¨ìˆœí•œ ì‹œê³„ê°€ ì•„ë‹ˆë‹¤." ë§ˆì§€ë§‰ í•µì‹¬ ì¥ì†Œ. ë„ë³´ ê±°ë¦¬ë¥¼ ì¸¡ì •í•˜ë¼.`,
        storyAfter: `"íƒˆì¶œ ì½”ë“œëŠ” ì‹œê°„ ì†ì— ìˆ¨ì–´ìˆë‹¤." ì‹œê³„ ê¸°ê³„ ë‚´ë¶€ë¡œ.` }
    ]
  },
  {
    id: 'laboratory', emoji: 'ğŸŒŠ', name: 'í•´ì € ì—°êµ¬ì†Œì˜ ê³µí¬',
    desc: 'ìˆ˜ì‹¬ 1000m ë°€í ì—°êµ¬ì†Œ. ê³¼í•™ì 5ëª… ë™ì‹œ ì‹¤ì¢…. íƒˆì¶œêµ¬ëŠ” í•˜ë‚˜ë¿ì´ì—ˆëŠ”ë°.',
    difficulty: 3, time: '20ë¶„',
    intro: `í•´ì € ì—°êµ¬ì†Œ 'ë”¥ ë¸”ë£¨', ìˆ˜ì‹¬ 1000m. ê³¼í•™ì 5ëª…ì´ ì–´ì ¯ë°¤ ë™ì‹œì— ì‚¬ë¼ì¡Œë‹¤. ë°€í ê³µê°„, íƒˆì¶œêµ¬ í•˜ë‚˜. êµ¬ì¡°ëŒ€ì¥ì¸ ë‹¹ì‹ ì´ ë‚´ë ¤ì™”ì§€ë§Œ, ì‹œìŠ¤í…œì´ ë´‰ì‡„ëë‹¤. ì‚°ì†Œ 3ì‹œê°„. ë‚´ë¶€ì— ì´ìƒí•œ ìƒëª…ì²´ì˜ í”ì . ìˆ˜ë©´ìœ¼ë¡œ ëŒì•„ê°€ì•¼ í•œë‹¤.`,
    puzzles: [
      { type:'general', title:'ğŸ§¬ í¼ì¦ 1: í•´ì € ê¸°ì•• ê³„ì‚°',
        story: `ì¤‘ì•™ ì œì–´ì‹¤. ê¹€í•´ì–‘ ë°•ì‚¬ì˜ ë§ˆì§€ë§‰ ë¡œê·¸ì¸. í™”ë©´ì— ë‚¨ê²¨ì§„ ê³„ì‚°:`,
        question: `í•´ì € 1000mì—ì„œì˜ ê¸°ì••ì„ ê³„ì‚°í•˜ë¼.

<b>ê¸°ì•• ê³„ì‚° ê³µì‹:</b>
- ìˆ˜ë©´ ê¸°ì••: 1ê¸°ì••  
- ìˆ˜ì‹¬ 10më§ˆë‹¤: +1ê¸°ì••

<b>ìˆ˜ì‹¬ 1000mì—ì„œ:</b>
ì´ ê¸°ì•• = 1 + (1000 Ã· 10)
ì´ ê¸°ì•• = 1 + 100
ì´ ê¸°ì•• = ?

ê³„ì‚° ê²°ê³¼ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '1 + (1000 Ã· 10) = 1 + 100 = ?',
        validate: i => i.trim() === '101' },
      { type:'general', title:'ğŸ“Š í¼ì¦ 2: í•´ì–‘ ë°•ì‚¬ì˜ ì—°êµ¬ ì¼ì§€ ë¶„ì„',
        story: `ê¹€í•´ì–‘ ë°•ì‚¬ì˜ ì¼ì§€. "ë¯¸ì§€ì˜ ìƒëª…ì²´. ê·¸ë“¤ì´ ìš°ë¦¬ë¥¼ ê´€ì°°í•˜ê³  ìˆë‹¤." ë§ˆì§€ë§‰ ê¸°ë¡: "ì„œì‹ì§€ë¥¼ ì§ì ‘ í™•ì¸í•˜ëŸ¬ ê°„ë‹¤."`,
        question: `ê¹€í•´ì–‘ ë°•ì‚¬ì˜ ì—°êµ¬ ì¼ì§€ì—ì„œ ë¯¸ì§€ ìƒëª…ì²´ì˜ ì¶œí˜„ íŒ¨í„´ì„ ë¶„ì„í•˜ë¼.

<b>ğŸŒŠ ìƒëª…ì²´ ëª©ê²© ê¸°ë¡:</b>
- 1ì£¼ì°¨: ëª©ê²© 1íšŒ
- 2ì£¼ì°¨: ëª©ê²© 1íšŒ
- 3ì£¼ì°¨: ëª©ê²© 2íšŒ
- 4ì£¼ì°¨: ëª©ê²© 3íšŒ
- 5ì£¼ì°¨: ëª©ê²© 5íšŒ
- 6ì£¼ì°¨: ?íšŒ

ì´ ìˆ˜ì—´ì˜ íŒ¨í„´ì„ íŒŒì•…í•˜ë¼. 6ì£¼ì°¨ ëª©ê²© íšŸìˆ˜ëŠ”?

(íŒíŠ¸: ê° í•­ì€ ì•ì˜ ë‘ í•­ì˜ í•©ì´ë‹¤)`,
        hint: '1, 1, 2, 3, 5... í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´! 3 + 5 = ?',
        validate: i => i.trim() === '8' },
      { type:'general', title:'ğŸ”¬ í¼ì¦ 3: DNA ì„œì—´ ì•”í˜¸',
        story: `ì‹¤í—˜ì‹¤. í‘¸ë¥¸ ë¹›ì„ ë‚´ëŠ” ë¯¸ì§€ì˜ ìƒ˜í”Œ. DNA ì„œì—´ë¶„ì„ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë˜ì–´ ìˆë‹¤.`,
        question: `DNA ì„œì—´ì„ ìˆ«ì ì½”ë“œë¡œ ë³€í™˜í•˜ë¼.

<b>ì—¼ê¸° ëŒ€ì‘í‘œ:</b> A=1, T=2, C=3, G=4

<b>DNA ì„œì—´:</b> ATCG-TACG-GCTA-ATGC

ê° ì—¼ê¸°ë¥¼ ìˆ«ìë¡œ ë³€í™˜:
- A(1) T(2) C(3) G(4)
- T(2) A(1) C(3) G(4)  
- G(4) C(3) T(2) A(1)
- A(1) T(2) G(4) C(3)

16ìë¦¬ ìˆ«ìë¥¼ ìˆœì„œëŒ€ë¡œ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: 'ATCG = 1234, TACG = 2134, GCTA = 4321, ATGC = 1243',
        validate: i => i.replace(/\s/g,'').replace(/-/g,'') === '1234213443211243' },
      { type:'general', title:'ğŸšª í¼ì¦ 5: ë¹„ìƒ íƒˆì¶œ ì‹œí€€ìŠ¤',
        story: `ë¹„ìƒ íƒˆì¶œ í”„ë¡œí† ì½œ. ë§ˆì§€ë§‰ ì¸ì¦ ì½”ë“œê°€ í•„ìš”í•˜ë‹¤.`,
        question: `ë¹„ìƒ íƒˆì¶œ ì¸ì¦ ì½”ë“œë¥¼ ê³„ì‚°í•˜ë¼.

<b>í•„ìš”í•œ ì •ë³´:</b>
- ë¯¸ì§€ ìƒëª…ì²´ ìµœì´ˆ ë°œê²¬: 2019ë…„
- ë”¥ ë¸”ë£¨ ì—°êµ¬ì†Œ ê±´ì„¤: 2015ë…„

<b>ì¸ì¦ ì½”ë“œ:</b> ë°œê²¬ ì—°ë„ + ê±´ì„¤ ì—°ë„

2019 + 2015 = ?

ê³„ì‚° ê²°ê³¼ë¥¼ ì…ë ¥í•˜ì‹œì˜¤.`,
        hint: '2019 + 2015 = ?',
        validate: i => i.trim() === '4034' },
      { type:'cpq', cpqIndex:0,
        story: `"ì´ ìƒëª…ì²´ë“¤ì€ ì§€êµ¬ ìƒëª…ì²´ê°€ ì•„ë‹ˆë‹¤." ê³¼í•™ìë“¤ì´ ë§ˆì§€ë§‰ìœ¼ë¡œ í–¥í•œ í•´ì € ì§€ì . ê±°ë¦¬ë¥¼ ì¸¡ì •í•˜ë¼.`,
        storyAfter: `"ê·¸ë“¤ì´ ìš°ë¦¬ë¥¼ ë°ë ¤ê°„ ì´ìœ ë¥¼ ì•Œì•˜ë‹¤. ì´ë¯¸ ëŠ¦ì—ˆë‹¤." ë¹„ìƒ íƒˆì¶œ í”„ë¡œí† ì½œì€ ì¤‘ì•™ ì»´í“¨í„°ì—.` }
    ]
  }
];

// â”€â”€â”€ ê²Œì„ ìƒíƒœ â”€â”€â”€
let state = { currentRoom:null, currentPuzzle:0, cpqCampaigns:[], startTime:null, attempts:0 };

function loadProgress() { try{return JSON.parse(localStorage.getItem('qube_progress')||'{}')}catch{return{}} }
function saveProgress(p) { localStorage.setItem('qube_progress',JSON.stringify(p)) }
function getGrade(c) { return c>=10?'ğŸ•µï¸ ì…œë¡':c>=7?'ğŸ” ëª…íƒì •':c>=4?'ğŸ§ íƒì •':c>=2?'ğŸ“‹ ìˆ˜ìŠµíƒì •':'ğŸ”° ì´ˆë³´íƒì •' }
function formatTime(s) { return Math.floor(s/60)+':'+String(s%60).padStart(2,'0') }

// â”€â”€â”€ íŒŒí‹°í´ â”€â”€â”€
function createParticles() {
  const c = document.getElementById('particles');
  for(let i=0;i<50;i++){
    const p = document.createElement('div');
    p.className='particle';
    p.style.left=Math.random()*100+'%';
    p.style.animationDuration=(8+Math.random()*12)+'s';
    p.style.animationDelay=Math.random()*10+'s';
    const sz=(2+Math.random()*3)+'px';
    p.style.width=p.style.height=sz;
    p.style.background=Math.random()>.5?'#b44aff':'#00e5ff';
    p.style.boxShadow=`0 0 6px ${p.style.background}`;
    c.appendChild(p);
  }
}

function scrollToRooms() { document.getElementById('rooms-section').scrollIntoView({behavior:'smooth'}) }

// â”€â”€â”€ í™”ë©´ ì „í™˜ â”€â”€â”€
function showScreen(id) {
  document.getElementById('home').classList.toggle('hidden', id!=='home');
  document.getElementById('game').classList.toggle('hidden', id!=='game');
  document.getElementById('result').classList.toggle('hidden', id!=='result');
  document.getElementById('loadingScreen').classList.remove('active');
  if(id!=='home') window.scrollTo(0,0);
}

function goHome() {
  state.currentRoom=null;
  showScreen('home');
  renderHome();
}

function confirmExit() { if(confirm('ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ? ì§„í–‰ ìƒí™©ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.')) goHome() }

// â”€â”€â”€ í™ˆ ë Œë”ë§ â”€â”€â”€
function renderHome() {
  const progress = loadProgress();
  const cleared = Object.keys(progress).filter(k=>progress[k]?.cleared).length;

  document.getElementById('statCleared').textContent = cleared;
  document.getElementById('statGrade').textContent = getGrade(cleared).split(' ')[0];
  document.getElementById('rooms-progress').textContent = `ğŸ”“ ${ROOMS.length}/${ROOMS.length} í•´ê¸ˆ Â· âœ… ${cleared} íƒˆì¶œ`;

  const grid = document.getElementById('roomGrid');
  grid.innerHTML = ROOMS.map(room => {
    const p = progress[room.id];
    const isClear = p?.cleared;
    const stars = Array.from({length:3},(_,i)=>`<span class="star ${i<room.difficulty?'':'empty'}">${i<room.difficulty?'â˜…':'â˜†'}</span>`).join('');
    const badge = isClear ? '<span class="room-badge badge-cleared">âœ“ í´ë¦¬ì–´</span>' : '<span class="room-badge badge-new">NEW</span>';

    return `<div class="room-card ${isClear?'cleared':''}" onclick="startRoom('${room.id}')">
      ${badge}
      <div class="room-emoji">${room.emoji}</div>
      <div class="room-title">${room.name}</div>
      <div class="room-desc">${room.desc}</div>
      <div class="room-meta">
        <span class="room-diff">${stars}</span>
        <span>â± ${room.time}</span>
        ${isClear?`<span>ğŸ† ${formatTime(p.bestTime)}</span>`:''}
      </div>
      <button class="room-start">${isClear?'ë‹¤ì‹œ ë„ì „ ğŸ”„':'ì…ì¥í•˜ê¸° ğŸ”‘'}</button>
    </div>`;
  }).join('');
}

// â”€â”€â”€ ê²Œì„ ì‹œì‘ â”€â”€â”€
async function startRoom(roomId) {
  const room = ROOMS.find(r=>r.id===roomId);
  if(!room) return;

  state.currentRoom=room; state.currentPuzzle=0; state.startTime=Date.now(); state.attempts=0;

  document.getElementById('loadingScreen').classList.add('active');

  try {
    const cpqCount = room.puzzles.filter(p=>p.type==='cpq').length;
    const res = await fetch(`${API}/api/random?count=${cpqCount}`);
    const data = await res.json();
    state.cpqCampaigns = data.campaigns || [];
  } catch(e) { state.cpqCampaigns = []; }

  showScreen('game');
  document.getElementById('gameTitle').textContent = room.emoji + ' ' + room.name;
  renderIntro();
}

function renderIntro() {
  renderProgress();
  document.getElementById('gameContent').innerHTML = `
    <div class="story-box">
      <div class="label">ğŸ“– í”„ë¡¤ë¡œê·¸</div>
      <p>${state.currentRoom.intro.replace(/\n/g,'<br>')}</p>
    </div>
    <button class="btn-next" onclick="renderPuzzle(0)">ì¡°ì‚¬ ì‹œì‘ â†’</button>`;
}

function renderProgress() {
  const room = state.currentRoom;
  const total = room.puzzles.length;
  document.getElementById('gameProgressText').textContent = `${state.currentPuzzle+1} / ${total}`;
  document.getElementById('progressBar').innerHTML =
    Array.from({length:total},(_,i)=>{
      const cls = i<state.currentPuzzle?'done':i===state.currentPuzzle?'active':'';
      return `<div class="prog-dot ${cls}"></div>`;
    }).join('');
}

// â”€â”€â”€ í¼ì¦ ë Œë”ë§ â”€â”€â”€
function renderPuzzle(idx) {
  state.currentPuzzle = idx;
  renderProgress();
  const puzzle = state.currentRoom.puzzles[idx];
  puzzle.type==='cpq' ? renderCpqPuzzle(idx,puzzle) : renderGeneralPuzzle(idx,puzzle);
}

function renderGeneralPuzzle(idx, puzzle) {
  document.getElementById('gameContent').innerHTML = `
    <div class="story-box">
      <div class="label">ğŸ“– ìƒí™©</div>
      <p>${puzzle.story.replace(/\n/g,'<br>')}</p>
    </div>
    <div class="puzzle-box">
      <div class="puzzle-label">${puzzle.title}</div>
      <div class="puzzle-question">${puzzle.question.replace(/\n/g,'<br>')}</div>
      <div class="hint-box hidden" id="hintBox">ğŸ’¡ ${puzzle.hint}</div>
      <button class="hint-btn" onclick="document.getElementById('hintBox').classList.remove('hidden');this.remove()">ğŸ’¡ íŒíŠ¸ ë³´ê¸°</button>
      <div class="answer-area">
        <input type="text" id="answerInput" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" onkeydown="handleEnter(event,${idx})">
        <button class="btn-submit" onclick="checkGeneral(${idx})">í™•ì¸</button>
      </div>
      <div id="feedback"></div>
    </div>`;
  setTimeout(() => document.getElementById('gameContent').scrollIntoView({behavior:'smooth'}), 100);
}

function renderCpqPuzzle(idx, puzzle) {
  const camp = state.cpqCampaigns[puzzle.cpqIndex];
  if(!camp) { nextPuzzle(idx); return; }

  const desc = camp.join_desc || '';
  const keyword = camp.search_keyword || '';
  const placeMatch = desc.match(/\[([^\]]*X[^\]]*)\]/);
  const placeHint = placeMatch ? placeMatch[1] : 'í•´ë‹¹ ì¥ì†Œ';
  const startMatch = desc.match(/ì¶œë°œì§€ë¥¼\s*\[([^\]]+)\]/);
  const startPlace = startMatch ? startMatch[1] : 'ì§€ì •ëœ ì¶œë°œì§€';

  document.getElementById('gameContent').innerHTML = `
    <div class="story-box">
      <div class="label">ğŸ“– ë‹¨ì„œ ë°œê²¬</div>
      <p>${puzzle.story.replace(/\n/g,'<br>')}</p>
    </div>
    <div class="puzzle-box">
      <div class="puzzle-label">ğŸ” í¼ì¦ ${idx+1}: ì¥ì†Œ ì¶”ì  ë¯¸ì…˜</div>
      <div class="puzzle-question">ë‹¨ì„œì— ì íŒ ì¥ì†Œë¥¼ ì°¾ì•„ì•¼ í•œë‹¤. ë„¤ì´ë²„ì—ì„œ ê²€ìƒ‰í•˜ì—¬ ê±¸ìŒ ìˆ˜ë¥¼ í™•ì¸í•˜ë¼.</div>
      <div class="cpq-mission">
        <div class="mission-title">ğŸ“‹ ë¯¸ì…˜ ìˆœì„œ</div>
        <ol class="cpq-steps">
          <li>ì•„ë˜ í‚¤ì›Œë“œë¥¼ ë³µì‚¬í•˜ì—¬ <b>ë„¤ì´ë²„</b>ì—ì„œ ê²€ìƒ‰</li>
          <li>ê²€ìƒ‰ ê²°ê³¼ì—ì„œ <b>${placeHint}</b> í´ë¦­</li>
          <li>í”Œë ˆì´ìŠ¤ì—ì„œ <b>ì§€ë„</b> íƒ­ â†’ <b>ì§€ë„ì•±ìœ¼ë¡œ ë³´ê¸°</b></li>
          <li><b>ë„ì°©</b> ë²„íŠ¼ í´ë¦­</li>
          <li>ì¶œë°œì§€ë¥¼ <b>${startPlace}</b>(ìœ¼)ë¡œ ì„¤ì •</li>
          <li><b>ë„ë³´</b> â†’ <b>ê°€ì¥ ë¹ ë¥¸</b> ê²½ë¡œì˜ ê±¸ìŒ ìˆ˜ í™•ì¸</li>
        </ol>
        <div class="cpq-keyword-box">
          <span class="cpq-keyword" onclick="copyKeyword(this)" title="í´ë¦­í•˜ì—¬ ë³µì‚¬">ğŸ” ${keyword}</span>
        </div>
      </div>
      <div class="answer-area" style="margin-top:16px">
        <input type="number" id="answerInput" placeholder="ê±¸ìŒ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”" onkeydown="handleEnter(event,${idx},'cpq')">
        <button class="btn-submit" onclick="checkCpq(${idx})">í™•ì¸</button>
      </div>
      <div id="feedback"></div>
    </div>`;
  setTimeout(() => document.getElementById('gameContent').scrollIntoView({behavior:'smooth'}), 100);
}

// â”€â”€â”€ ì…ë ¥ í•¸ë“¤ëŸ¬ â”€â”€â”€
let isComposing = false;
document.addEventListener('compositionstart', ()=>{isComposing=true});
document.addEventListener('compositionend', ()=>{isComposing=false});

function handleEnter(e, idx, type) {
  if(e.key==='Enter' && !isComposing) {
    e.preventDefault();
    type==='cpq' ? checkCpq(idx) : checkGeneral(idx);
  }
}

// â”€â”€â”€ ê²€ì¦ â”€â”€â”€
function checkGeneral(idx) {
  const input = document.getElementById('answerInput').value.trim();
  if(!input) return;
  state.attempts++;
  showFeedback(state.currentRoom.puzzles[idx].validate(input), idx);
}

async function checkCpq(idx) {
  const input = document.getElementById('answerInput').value.trim();
  if(!input) return;
  state.attempts++;
  const camp = state.cpqCampaigns[state.currentRoom.puzzles[idx].cpqIndex];
  try {
    const res = await fetch(`${API}/api/verify`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({campaign_id:camp.id,user_answer:input})});
    const data = await res.json();
    showFeedback(data.correct, idx);
  } catch { showFeedback(false, idx); }
}

function showFeedback(correct, idx) {
  const fb = document.getElementById('feedback');
  const puzzle = state.currentRoom.puzzles[idx];
  if(correct) {
    const after = puzzle.storyAfter||'';
    fb.innerHTML = `<div class="feedback correct">âœ… ì •ë‹µ!${after?' '+after:''}</div>
      <button class="btn-next" onclick="nextPuzzle(${idx})">${idx<state.currentRoom.puzzles.length-1?'ë‹¤ìŒ í¼ì¦ â†’':'ğŸšª íƒˆì¶œ!'}</button>`;
  } else {
    fb.innerHTML = '<div class="feedback wrong">âŒ ì˜¤ë‹µ. ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”.</div>';
    document.getElementById('answerInput').value='';
    document.getElementById('feedback').scrollIntoView({behavior:'smooth', block:'center'});
  }
}

function nextPuzzle(cur) { cur+1>=state.currentRoom.puzzles.length ? showResult() : renderPuzzle(cur+1) }

// â”€â”€â”€ ê²°ê³¼ â”€â”€â”€
function showResult() {
  const elapsed = Math.floor((Date.now()-state.startTime)/1000);
  const room = state.currentRoom;
  const progress = loadProgress();
  const prev = progress[room.id];
  const bestTime = prev?.bestTime ? Math.min(prev.bestTime,elapsed) : elapsed;
  progress[room.id] = {cleared:true, bestTime, lastPlayed:Date.now()};
  saveProgress(progress);

  const cleared = Object.keys(progress).filter(k=>progress[k]?.cleared).length;
  const grade = getGrade(cleared);
  let gameGrade = 'S';
  if(elapsed>600) gameGrade='C'; else if(elapsed>300) gameGrade='B'; else if(elapsed>180) gameGrade='A';

  showScreen('result');
  document.getElementById('resultContent').innerHTML = `
    <div class="result-emoji">ğŸ‰</div>
    <div class="result-title">íƒˆì¶œ ì„±ê³µ!</div>
    <div class="result-sub">${room.name}ì—ì„œ ë¬´ì‚¬íˆ íƒˆì¶œí–ˆìŠµë‹ˆë‹¤</div>
    <div class="result-grade">${gameGrade} RANK</div>
    <div class="result-stats">
      <div class="result-stat"><div class="result-stat-val">${formatTime(elapsed)}</div><div class="result-stat-label">ì†Œìš”ì‹œê°„</div></div>
      <div class="result-stat"><div class="result-stat-val">${state.attempts}</div><div class="result-stat-label">ì‹œë„íšŸìˆ˜</div></div>
      <div class="result-stat"><div class="result-stat-val">${grade.split(' ')[0]}</div><div class="result-stat-label">${grade.split(' ')[1]||''}</div></div>
    </div>
    <div class="result-btns">
      <button class="btn-home" onclick="goHome()">ğŸšª ë¡œë¹„ë¡œ ëŒì•„ê°€ê¸°</button>
      <button class="btn-share" onclick="shareResult()">ğŸ“¤ ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
    </div>`;
}

function shareResult() {
  const room = state.currentRoom;
  const elapsed = Math.floor((Date.now()-state.startTime)/1000);
  const text = `ğŸ” QUBE - ${room.name}\n${room.emoji} íƒˆì¶œ ì„±ê³µ! | â± ${formatTime(elapsed)}\n\në‚˜ëŠ” íƒˆì¶œí–ˆë‹¤. ë‹¹ì‹ ì€?\nğŸ‘‰ https://qube.salmonholic.com`;
  navigator.share ? navigator.share({text}) : (navigator.clipboard?.writeText(text), alert('í´ë¦½ë³´ë“œì— ë³µì‚¬ëìŠµë‹ˆë‹¤!'));
}

function copyKeyword(el) {
  const text = el.textContent.replace('ğŸ” ','').trim();
  navigator.clipboard?.writeText(text);
  const orig = el.textContent;
  el.textContent = 'âœ“ ë³µì‚¬ë¨!';
  setTimeout(()=>el.textContent=orig, 1500);
}

// â”€â”€â”€ ì´ˆê¸°í™” â”€â”€â”€
createParticles();
renderHome();
</script>
</body>
</html>
